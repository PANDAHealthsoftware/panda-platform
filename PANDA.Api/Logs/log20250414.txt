2025-04-14 10:28:02.379 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 10:28:02.393 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - null null
2025-04-14 10:28:02.408 +01:00 [INF] Hosting environment: Development
2025-04-14 10:28:02.408 +01:00 [INF] Content root path: C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api
2025-04-14 10:28:02.571 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 181.1183ms
2025-04-14 10:28:16.524 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 10:28:16.531 +01:00 [INF] CORS policy execution successful.
2025-04-14 10:28:16.535 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api)'
2025-04-14 10:28:16.547 +01:00 [INF] Route matched with {action = "GetAll", controller = "Appointments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.AppointmentsController (PANDA.Api).
2025-04-14 10:28:16.642 +01:00 [INF] Executing action method PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 10:28:16.644 +01:00 [INF] Retrieving all appointments
2025-04-14 10:28:17.173 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AppointmentDate", "a"."Clinician", "a"."ClinicianId", "a"."Department", "a"."MissedTimestamp", "a"."PatientId", "a"."PatientName", "a"."Status"
FROM "Appointments" AS "a"
ORDER BY "a"."AppointmentDate"
2025-04-14 10:28:17.240 +01:00 [INF] Executed action method PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 594.6947ms.
2025-04-14 10:28:17.244 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.Appointment.AppointmentDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 10:28:17.283 +01:00 [INF] Executed action PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api) in 733.9076ms
2025-04-14 10:28:17.283 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api)'
2025-04-14 10:28:17.287 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 200 null application/json; charset=utf-8 764.0124ms
2025-04-14 10:28:20.608 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients/summaries - null null
2025-04-14 10:28:20.610 +01:00 [INF] CORS policy execution successful.
2025-04-14 10:28:20.610 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetSummaries (PANDA.Api)'
2025-04-14 10:28:20.613 +01:00 [INF] Route matched with {action = "GetSummaries", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[PANDA.Shared.DTOs.Patient.PatientSummaryDto]]] GetSummaries() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 10:28:20.614 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetSummaries (PANDA.Api) - Validation state: "Valid"
2025-04-14 10:28:20.644 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."FirstName" || ' ' || "p"."LastName" AS "FullName"
FROM "Patients" AS "p"
2025-04-14 10:28:20.645 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetSummaries (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 30.5653ms.
2025-04-14 10:28:20.645 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.Patient.PatientSummaryDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 10:28:20.647 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetSummaries (PANDA.Api) in 33.4289ms
2025-04-14 10:28:20.647 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetSummaries (PANDA.Api)'
2025-04-14 10:28:20.647 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients/summaries - 200 null application/json; charset=utf-8 39.1569ms
2025-04-14 10:28:20.670 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/clinicians - null null
2025-04-14 10:28:20.671 +01:00 [INF] CORS policy execution successful.
2025-04-14 10:28:20.671 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.CliniciansController.GetAll (PANDA.Api)'
2025-04-14 10:28:20.673 +01:00 [INF] Route matched with {action = "GetAll", controller = "Clinicians"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.CliniciansController (PANDA.Api).
2025-04-14 10:28:20.673 +01:00 [INF] Executing action method PANDA.Api.Controllers.CliniciansController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 10:28:20.674 +01:00 [INF] Retrieving all clinicians
2025-04-14 10:28:20.705 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Department", "c"."Name"
FROM "Clinicians" AS "c"
2025-04-14 10:28:20.713 +01:00 [INF] Executed action method PANDA.Api.Controllers.CliniciansController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 39.3743ms.
2025-04-14 10:28:20.713 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.Clinician.ClinicianDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 10:28:20.715 +01:00 [INF] Executed action PANDA.Api.Controllers.CliniciansController.GetAll (PANDA.Api) in 41.4889ms
2025-04-14 10:28:20.715 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.CliniciansController.GetAll (PANDA.Api)'
2025-04-14 10:28:20.715 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/clinicians - 200 null application/json; charset=utf-8 44.3421ms
2025-04-14 10:28:23.665 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients - null null
2025-04-14 10:28:23.666 +01:00 [INF] CORS policy execution successful.
2025-04-14 10:28:23.666 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 10:28:23.668 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 10:28:23.668 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 10:28:23.669 +01:00 [INF] Retrieving all patients
2025-04-14 10:28:23.674 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
2025-04-14 10:28:23.684 +01:00 [INF] Retrieved 5 patients
2025-04-14 10:28:23.685 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 16.6068ms.
2025-04-14 10:28:23.685 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.PatientDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 10:28:23.690 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) in 21.6716ms
2025-04-14 10:28:23.690 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 10:28:23.690 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients - 200 null application/json; charset=utf-8 24.3499ms
2025-04-14 10:28:27.965 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/patients/1 - null null
2025-04-14 10:28:27.965 +01:00 [INF] CORS policy execution successful.
2025-04-14 10:28:27.966 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/patients/1 - 204 null null 1.3268ms
2025-04-14 10:28:27.968 +01:00 [INF] Request starting HTTP/2 PUT https://localhost:44372/api/patients/1 - application/json; charset=utf-8 134
2025-04-14 10:28:27.968 +01:00 [INF] CORS policy execution successful.
2025-04-14 10:28:27.968 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.Update (PANDA.Api)'
2025-04-14 10:28:27.973 +01:00 [INF] Route matched with {action = "Update", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, PANDA.Shared.DTOs.Patient.UpdatePatientDto) on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 10:28:28.030 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.Update (PANDA.Api) - Validation state: "Valid"
2025-04-14 10:28:28.031 +01:00 [INF] ðŸ”„ Incoming UpdatePatientDto: {"FirstName":"Alicex","LastName":"Smith","NHSNumber":"1000000001","Postcode":"BB6 7RP","DateOfBirth":"1985-05-12T00:00:00.0000000","Gender":"Female","$type":"UpdatePatientDto"}
2025-04-14 10:28:28.054 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
WHERE "p"."Id" = @__p_0
LIMIT 1
2025-04-14 10:28:28.102 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Patients" SET "FirstName" = @p0
WHERE "Id" = @p1
RETURNING 1;
2025-04-14 10:28:28.112 +01:00 [INF] âœ… Patient updated (ID: 1)
2025-04-14 10:28:28.112 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.Update (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.NoContentResult in 81.859ms.
2025-04-14 10:28:28.114 +01:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-04-14 10:28:28.114 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.Update (PANDA.Api) in 140.2885ms
2025-04-14 10:28:28.114 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.Update (PANDA.Api)'
2025-04-14 10:28:28.114 +01:00 [INF] Request finished HTTP/2 PUT https://localhost:44372/api/patients/1 - 204 null null 145.9523ms
2025-04-14 10:28:28.125 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients - null null
2025-04-14 10:28:28.125 +01:00 [INF] CORS policy execution successful.
2025-04-14 10:28:28.125 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 10:28:28.125 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 10:28:28.125 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 10:28:28.126 +01:00 [INF] Retrieving all patients
2025-04-14 10:28:28.126 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
2025-04-14 10:28:28.127 +01:00 [INF] Retrieved 5 patients
2025-04-14 10:28:28.127 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1.4233ms.
2025-04-14 10:28:28.127 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.PatientDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 10:28:28.127 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) in 2.0598ms
2025-04-14 10:28:28.127 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 10:28:28.127 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients - 200 null application/json; charset=utf-8 2.6127ms
2025-04-14 10:28:32.994 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/patients/1 - null null
2025-04-14 10:28:32.994 +01:00 [INF] CORS policy execution successful.
2025-04-14 10:28:32.995 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/patients/1 - 204 null null 0.3798ms
2025-04-14 10:28:32.995 +01:00 [INF] Request starting HTTP/2 PUT https://localhost:44372/api/patients/1 - application/json; charset=utf-8 133
2025-04-14 10:28:32.996 +01:00 [INF] CORS policy execution successful.
2025-04-14 10:28:32.996 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.Update (PANDA.Api)'
2025-04-14 10:28:32.996 +01:00 [INF] Route matched with {action = "Update", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, PANDA.Shared.DTOs.Patient.UpdatePatientDto) on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 10:28:32.998 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.Update (PANDA.Api) - Validation state: "Valid"
2025-04-14 10:28:32.998 +01:00 [INF] ðŸ”„ Incoming UpdatePatientDto: {"FirstName":"Alice","LastName":"Smith","NHSNumber":"1000000001","Postcode":"BB6 7RP","DateOfBirth":"1985-05-12T00:00:00.0000000","Gender":"Female","$type":"UpdatePatientDto"}
2025-04-14 10:28:33.001 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
WHERE "p"."Id" = @__p_0
LIMIT 1
2025-04-14 10:28:33.003 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Patients" SET "FirstName" = @p0
WHERE "Id" = @p1
RETURNING 1;
2025-04-14 10:28:33.007 +01:00 [INF] âœ… Patient updated (ID: 1)
2025-04-14 10:28:33.007 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.Update (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.NoContentResult in 8.7652ms.
2025-04-14 10:28:33.007 +01:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-04-14 10:28:33.007 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.Update (PANDA.Api) in 11.2552ms
2025-04-14 10:28:33.007 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.Update (PANDA.Api)'
2025-04-14 10:28:33.007 +01:00 [INF] Request finished HTTP/2 PUT https://localhost:44372/api/patients/1 - 204 null null 11.7498ms
2025-04-14 10:28:33.012 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients - null null
2025-04-14 10:28:33.012 +01:00 [INF] CORS policy execution successful.
2025-04-14 10:28:33.012 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 10:28:33.012 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 10:28:33.013 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 10:28:33.013 +01:00 [INF] Retrieving all patients
2025-04-14 10:28:33.013 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
2025-04-14 10:28:33.014 +01:00 [INF] Retrieved 5 patients
2025-04-14 10:28:33.014 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 0.9297ms.
2025-04-14 10:28:33.014 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.PatientDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 10:28:33.014 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) in 1.5535ms
2025-04-14 10:28:33.014 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 10:28:33.014 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients - 200 null application/json; charset=utf-8 2.0182ms
2025-04-14 10:29:34.277 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/patients - null null
2025-04-14 10:29:34.277 +01:00 [INF] CORS policy execution successful.
2025-04-14 10:29:34.277 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/patients - 204 null null 0.4741ms
2025-04-14 10:29:34.278 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44372/api/patients - application/json; charset=utf-8 141
2025-04-14 10:29:34.278 +01:00 [INF] CORS policy execution successful.
2025-04-14 10:29:34.278 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.Create (PANDA.Api)'
2025-04-14 10:29:34.281 +01:00 [INF] Route matched with {action = "Create", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(PANDA.Shared.DTOs.Patient.CreatePatientDto) on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 10:29:34.293 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.Create (PANDA.Api) - Validation state: "Valid"
2025-04-14 10:29:34.293 +01:00 [INF] Creating patient with data: {"FirstName":"John","LastName":"Mc Fish","DateOfBirth":"1982-04-14T00:00:00.0000000","NHSNumber":"9434765919","Postcode":"M4 5DT","Gender":"Male","$type":"CreatePatientDto"}
2025-04-14 10:29:34.314 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4), @p2='?' (DbType = Int32), @p3='?' (Size = 7), @p4='?' (Size = 10), @p5='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Patients" ("DateOfBirth", "FirstName", "Gender", "LastName", "NHSNumber", "Postcode")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING "Id";
2025-04-14 10:29:34.326 +01:00 [INF] Patient added with ID: 6
2025-04-14 10:29:34.326 +01:00 [INF] Patient created successfully with ID: 6
2025-04-14 10:29:34.326 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.Create (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.CreatedAtActionResult in 33.4965ms.
2025-04-14 10:29:34.326 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'PANDA.Api.Models.Patient'.
2025-04-14 10:29:34.336 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.Create (PANDA.Api) in 55.7956ms
2025-04-14 10:29:34.336 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.Create (PANDA.Api)'
2025-04-14 10:29:34.337 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44372/api/patients - 201 null application/json; charset=utf-8 58.4668ms
2025-04-14 10:29:34.342 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients - null null
2025-04-14 10:29:34.342 +01:00 [INF] CORS policy execution successful.
2025-04-14 10:29:34.342 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 10:29:34.342 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 10:29:34.342 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 10:29:34.343 +01:00 [INF] Retrieving all patients
2025-04-14 10:29:34.343 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
2025-04-14 10:29:34.343 +01:00 [INF] Retrieved 6 patients
2025-04-14 10:29:34.343 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 0.9106ms.
2025-04-14 10:29:34.344 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.PatientDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 10:29:34.344 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) in 1.3919ms
2025-04-14 10:29:34.344 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 10:29:34.344 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients - 200 null application/json; charset=utf-8 1.9124ms
2025-04-14 10:29:37.495 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients - null null
2025-04-14 10:29:37.495 +01:00 [INF] CORS policy execution successful.
2025-04-14 10:29:37.495 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 10:29:37.495 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 10:29:37.496 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 10:29:37.496 +01:00 [INF] Retrieving all patients
2025-04-14 10:29:37.496 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
2025-04-14 10:29:37.497 +01:00 [INF] Retrieved 6 patients
2025-04-14 10:29:37.497 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1.0632ms.
2025-04-14 10:29:37.497 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.PatientDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 10:29:37.497 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) in 1.7392ms
2025-04-14 10:29:37.497 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 10:29:37.497 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients - 200 null application/json; charset=utf-8 2.2759ms
2025-04-14 10:31:43.762 +01:00 [INF] Application is shutting down...
2025-04-14 13:06:01.014 +01:00 [INF] User profile is available. Using 'C:\Users\simon_adm\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-14 13:06:01.092 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 13:06:01.092 +01:00 [INF] Hosting environment: Development
2025-04-14 13:06:01.092 +01:00 [INF] Content root path: C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api
2025-04-14 13:06:01.104 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/index.html - null null
2025-04-14 13:06:01.207 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/index.html - 200 null text/html;charset=utf-8 103.8417ms
2025-04-14 13:06:01.408 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - null null
2025-04-14 13:06:01.417 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/favicon-32x32.png - null null
2025-04-14 13:06:01.426 +01:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-04-14 13:06:01.426 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/favicon-32x32.png - 200 628 image/png 8.8285ms
2025-04-14 13:06:01.519 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 111.7944ms
2025-04-14 13:06:18.282 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients - null null
2025-04-14 13:06:18.286 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:06:18.307 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 13:06:18.319 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 13:06:18.405 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 13:06:18.407 +01:00 [INF] Retrieving all patients
2025-04-14 13:06:18.969 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
2025-04-14 13:06:19.024 +01:00 [INF] Retrieved 6 patients
2025-04-14 13:06:19.028 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 619.7199ms.
2025-04-14 13:06:19.031 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.PatientDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 13:06:19.059 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) in 737.198ms
2025-04-14 13:06:19.059 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 13:06:19.064 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients - 200 null application/json; charset=utf-8 781.7392ms
2025-04-14 13:06:19.768 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 13:06:19.769 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:06:19.773 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 13:06:19.776 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 13:06:19.777 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 9.5567ms
2025-04-14 13:06:22.610 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients - null null
2025-04-14 13:06:22.610 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:06:22.611 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 13:06:22.611 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 13:06:22.612 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 13:06:22.612 +01:00 [INF] Retrieving all patients
2025-04-14 13:06:22.624 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
2025-04-14 13:06:22.625 +01:00 [INF] Retrieved 6 patients
2025-04-14 13:06:22.625 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 12.2798ms.
2025-04-14 13:06:22.625 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.PatientDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 13:06:22.625 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) in 13.8798ms
2025-04-14 13:06:22.625 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 13:06:22.626 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients - 200 null application/json; charset=utf-8 15.9021ms
2025-04-14 13:07:59.176 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/auth/login - null null
2025-04-14 13:07:59.176 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:07:59.177 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/auth/login - 204 null null 1.119ms
2025-04-14 13:07:59.179 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44372/api/auth/login - application/json; charset=utf-8 41
2025-04-14 13:07:59.179 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:07:59.179 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44372/api/auth/login - 404 null null 0.4077ms
2025-04-14 13:07:59.179 +01:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:44372/api/auth/login, Response status code: 404
2025-04-14 13:14:10.952 +01:00 [INF] Application is shutting down...
2025-04-14 13:15:06.610 +01:00 [INF] User profile is available. Using 'C:\Users\simon_adm\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-14 13:15:06.676 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 13:15:06.677 +01:00 [INF] Hosting environment: Development
2025-04-14 13:15:06.677 +01:00 [INF] Content root path: C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api
2025-04-14 13:15:06.688 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - null null
2025-04-14 13:15:06.852 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 164.7777ms
2025-04-14 13:15:30.996 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 13:15:31.000 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:15:31.018 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 13:15:31.021 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 13:15:31.022 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 26.5302ms
2025-04-14 13:15:35.766 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients - null null
2025-04-14 13:15:35.767 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:15:35.770 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 13:15:35.783 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 13:15:35.868 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 13:15:35.870 +01:00 [INF] Retrieving all patients
2025-04-14 13:15:36.425 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
2025-04-14 13:15:36.477 +01:00 [INF] Retrieved 6 patients
2025-04-14 13:15:36.480 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 608.7351ms.
2025-04-14 13:15:36.485 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.PatientDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 13:15:36.525 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) in 740.0687ms
2025-04-14 13:15:36.526 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 13:15:36.530 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients - 200 null application/json; charset=utf-8 764.2613ms
2025-04-14 13:15:42.329 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 13:15:42.330 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:15:42.331 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 13:15:42.332 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 13:15:42.332 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 3.2718ms
2025-04-14 13:15:44.787 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 13:15:44.787 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:15:44.788 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 13:15:44.788 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 13:15:44.789 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 1.6114ms
2025-04-14 13:30:03.920 +01:00 [INF] Application is shutting down...
2025-04-14 13:35:52.648 +01:00 [INF] User profile is available. Using 'C:\Users\simon_adm\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-14 13:35:52.714 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 13:35:52.714 +01:00 [INF] Hosting environment: Development
2025-04-14 13:35:52.714 +01:00 [INF] Content root path: C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api
2025-04-14 13:35:52.726 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - null null
2025-04-14 13:35:52.877 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 152.0522ms
2025-04-14 13:36:10.162 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 13:36:10.169 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:36:10.186 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 13:36:10.189 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 13:36:10.190 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 28.0229ms
2025-04-14 13:36:11.900 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients - null null
2025-04-14 13:36:11.901 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:36:11.904 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 13:36:11.914 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 13:36:11.996 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 13:36:11.998 +01:00 [INF] Retrieving all patients
2025-04-14 13:36:12.569 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
2025-04-14 13:36:12.622 +01:00 [INF] Retrieved 6 patients
2025-04-14 13:36:12.625 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 625.8536ms.
2025-04-14 13:36:12.630 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.PatientDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 13:36:12.672 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) in 754.8035ms
2025-04-14 13:36:12.672 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 13:36:12.676 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients - 200 null application/json; charset=utf-8 775.8639ms
2025-04-14 13:36:19.784 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 13:36:19.785 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:36:19.786 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 13:36:19.786 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 13:36:19.787 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 2.592ms
2025-04-14 13:36:21.159 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients - null null
2025-04-14 13:36:21.160 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:36:21.160 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 13:36:21.160 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 13:36:21.161 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 13:36:21.161 +01:00 [INF] Retrieving all patients
2025-04-14 13:36:21.173 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
2025-04-14 13:36:21.174 +01:00 [INF] Retrieved 6 patients
2025-04-14 13:36:21.174 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 12.4889ms.
2025-04-14 13:36:21.174 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.PatientDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 13:36:21.174 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) in 14.0234ms
2025-04-14 13:36:21.174 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 13:36:21.175 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients - 200 null application/json; charset=utf-8 15.1448ms
2025-04-14 13:36:25.087 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients - null null
2025-04-14 13:36:25.088 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:36:25.088 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 13:36:25.088 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 13:36:25.090 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 13:36:25.090 +01:00 [INF] Retrieving all patients
2025-04-14 13:36:25.124 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
2025-04-14 13:36:25.124 +01:00 [INF] Retrieved 6 patients
2025-04-14 13:36:25.124 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 34.831ms.
2025-04-14 13:36:25.125 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.PatientDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 13:36:25.125 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) in 36.8627ms
2025-04-14 13:36:25.125 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 13:36:25.125 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients - 200 null application/json; charset=utf-8 37.6225ms
2025-04-14 13:36:48.945 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 13:36:48.945 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:36:48.946 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 13:36:48.946 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 13:36:48.946 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 1.6716ms
2025-04-14 13:36:51.571 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients - null null
2025-04-14 13:36:51.571 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:36:51.571 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 13:36:51.571 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 13:36:51.572 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 13:36:51.572 +01:00 [INF] Retrieving all patients
2025-04-14 13:36:51.573 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
2025-04-14 13:36:51.573 +01:00 [INF] Retrieved 6 patients
2025-04-14 13:36:51.573 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1.0652ms.
2025-04-14 13:36:51.573 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.PatientDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 13:36:51.573 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) in 1.7486ms
2025-04-14 13:36:51.573 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 13:36:51.573 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients - 200 null application/json; charset=utf-8 2.466ms
2025-04-14 13:50:28.920 +01:00 [INF] Application is shutting down...
2025-04-14 13:53:30.382 +01:00 [INF] User profile is available. Using 'C:\Users\simon_adm\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-14 13:53:30.445 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 13:53:30.446 +01:00 [INF] Hosting environment: Development
2025-04-14 13:53:30.446 +01:00 [INF] Content root path: C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api
2025-04-14 13:53:30.460 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - null null
2025-04-14 13:53:30.617 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 157.7857ms
2025-04-14 13:53:47.709 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 13:53:47.714 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:53:47.733 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 13:53:47.736 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 13:53:47.737 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 28.7126ms
2025-04-14 13:53:49.823 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients - null null
2025-04-14 13:53:49.825 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:53:49.828 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 13:53:49.841 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 13:53:49.926 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 13:53:49.928 +01:00 [INF] Retrieving all patients
2025-04-14 13:53:50.503 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
2025-04-14 13:53:50.556 +01:00 [INF] Retrieved 6 patients
2025-04-14 13:53:50.560 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 630.5052ms.
2025-04-14 13:53:50.565 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.PatientDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 13:53:50.606 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) in 763.0166ms
2025-04-14 13:53:50.606 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 13:53:50.611 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients - 200 null application/json; charset=utf-8 788.0984ms
2025-04-14 13:54:02.983 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/patients/1 - null null
2025-04-14 13:54:02.983 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:54:02.984 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/patients/1 - 204 null null 1.3358ms
2025-04-14 13:54:02.985 +01:00 [INF] Request starting HTTP/2 PUT https://localhost:44372/api/patients/1 - application/json; charset=utf-8 133
2025-04-14 13:54:02.985 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:54:02.986 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.Update (PANDA.Api)'
2025-04-14 13:54:02.992 +01:00 [INF] Route matched with {action = "Update", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, PANDA.Shared.DTOs.Patient.UpdatePatientDto) on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 13:54:03.053 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.Update (PANDA.Api) - Validation state: "Valid"
2025-04-14 13:54:03.054 +01:00 [INF] ðŸ”„ Incoming UpdatePatientDto: {"FirstName":"Alice","LastName":"Smith","NHSNumber":"1000000001","Postcode":"BB6 7RP","DateOfBirth":"1985-05-12T00:00:00.0000000","Gender":"Other","$type":"UpdatePatientDto"}
2025-04-14 13:54:03.130 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
WHERE "p"."Id" = @__p_0
LIMIT 1
2025-04-14 13:54:03.148 +01:00 [INF] âœ… Patient updated (ID: 1)
2025-04-14 13:54:03.148 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.Update (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.NoContentResult in 94.7124ms.
2025-04-14 13:54:03.150 +01:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-04-14 13:54:03.150 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.Update (PANDA.Api) in 157.5907ms
2025-04-14 13:54:03.150 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.Update (PANDA.Api)'
2025-04-14 13:54:03.150 +01:00 [INF] Request finished HTTP/2 PUT https://localhost:44372/api/patients/1 - 204 null null 164.9918ms
2025-04-14 13:54:03.235 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients - null null
2025-04-14 13:54:03.236 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:54:03.236 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 13:54:03.236 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 13:54:03.238 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 13:54:03.238 +01:00 [INF] Retrieving all patients
2025-04-14 13:54:03.273 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
2025-04-14 13:54:03.273 +01:00 [INF] Retrieved 6 patients
2025-04-14 13:54:03.273 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 35.4309ms.
2025-04-14 13:54:03.274 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.PatientDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 13:54:03.274 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) in 37.9023ms
2025-04-14 13:54:03.274 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 13:54:03.274 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients - 200 null application/json; charset=utf-8 38.6429ms
2025-04-14 13:54:07.690 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients - null null
2025-04-14 13:54:07.690 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:54:07.690 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 13:54:07.690 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 13:54:07.691 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 13:54:07.691 +01:00 [INF] Retrieving all patients
2025-04-14 13:54:07.692 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
2025-04-14 13:54:07.692 +01:00 [INF] Retrieved 6 patients
2025-04-14 13:54:07.692 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1.157ms.
2025-04-14 13:54:07.692 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.PatientDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 13:54:07.692 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) in 1.8672ms
2025-04-14 13:54:07.692 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 13:54:07.692 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients - 200 null application/json; charset=utf-8 2.5572ms
2025-04-14 13:54:16.955 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/patients/1 - null null
2025-04-14 13:54:16.956 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:54:16.956 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/patients/1 - 204 null null 0.4641ms
2025-04-14 13:54:16.957 +01:00 [INF] Request starting HTTP/2 PUT https://localhost:44372/api/patients/1 - application/json; charset=utf-8 134
2025-04-14 13:54:16.957 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:54:16.957 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.Update (PANDA.Api)'
2025-04-14 13:54:16.957 +01:00 [INF] Route matched with {action = "Update", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, PANDA.Shared.DTOs.Patient.UpdatePatientDto) on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 13:54:16.959 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.Update (PANDA.Api) - Validation state: "Valid"
2025-04-14 13:54:16.960 +01:00 [INF] ðŸ”„ Incoming UpdatePatientDto: {"FirstName":"Alicef","LastName":"Smith","NHSNumber":"1000000001","Postcode":"BB6 7RP","DateOfBirth":"1985-05-12T00:00:00.0000000","Gender":"Female","$type":"UpdatePatientDto"}
2025-04-14 13:54:16.962 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
WHERE "p"."Id" = @__p_0
LIMIT 1
2025-04-14 13:54:17.000 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Patients" SET "FirstName" = @p0
WHERE "Id" = @p1
RETURNING 1;
2025-04-14 13:54:17.011 +01:00 [INF] âœ… Patient updated (ID: 1)
2025-04-14 13:54:17.011 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.Update (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.NoContentResult in 51.9337ms.
2025-04-14 13:54:17.012 +01:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-04-14 13:54:17.012 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.Update (PANDA.Api) in 54.5613ms
2025-04-14 13:54:17.012 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.Update (PANDA.Api)'
2025-04-14 13:54:17.012 +01:00 [INF] Request finished HTTP/2 PUT https://localhost:44372/api/patients/1 - 204 null null 55.1573ms
2025-04-14 13:54:17.099 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients - null null
2025-04-14 13:54:17.099 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:54:17.099 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 13:54:17.099 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 13:54:17.100 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 13:54:17.100 +01:00 [INF] Retrieving all patients
2025-04-14 13:54:17.100 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
2025-04-14 13:54:17.101 +01:00 [INF] Retrieved 6 patients
2025-04-14 13:54:17.101 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 0.9837ms.
2025-04-14 13:54:17.101 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.PatientDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 13:54:17.101 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) in 1.6005ms
2025-04-14 13:54:17.101 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 13:54:17.101 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients - 200 null application/json; charset=utf-8 2.2069ms
2025-04-14 13:54:23.638 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/patients/1 - null null
2025-04-14 13:54:23.638 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:54:23.638 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/patients/1 - 204 null null 0.3824ms
2025-04-14 13:54:23.639 +01:00 [INF] Request starting HTTP/2 PUT https://localhost:44372/api/patients/1 - application/json; charset=utf-8 133
2025-04-14 13:54:23.639 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:54:23.639 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.Update (PANDA.Api)'
2025-04-14 13:54:23.639 +01:00 [INF] Route matched with {action = "Update", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, PANDA.Shared.DTOs.Patient.UpdatePatientDto) on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 13:54:23.640 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.Update (PANDA.Api) - Validation state: "Valid"
2025-04-14 13:54:23.640 +01:00 [INF] ðŸ”„ Incoming UpdatePatientDto: {"FirstName":"Alice","LastName":"Smith","NHSNumber":"1000000001","Postcode":"BB6 7RP","DateOfBirth":"1985-05-12T00:00:00.0000000","Gender":"Female","$type":"UpdatePatientDto"}
2025-04-14 13:54:23.641 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
WHERE "p"."Id" = @__p_0
LIMIT 1
2025-04-14 13:54:23.643 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Patients" SET "FirstName" = @p0
WHERE "Id" = @p1
RETURNING 1;
2025-04-14 13:54:23.647 +01:00 [INF] âœ… Patient updated (ID: 1)
2025-04-14 13:54:23.647 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.Update (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.NoContentResult in 6.8443ms.
2025-04-14 13:54:23.647 +01:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-04-14 13:54:23.647 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.Update (PANDA.Api) in 8.0802ms
2025-04-14 13:54:23.647 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.Update (PANDA.Api)'
2025-04-14 13:54:23.648 +01:00 [INF] Request finished HTTP/2 PUT https://localhost:44372/api/patients/1 - 204 null null 8.5987ms
2025-04-14 13:54:23.651 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients - null null
2025-04-14 13:54:23.651 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:54:23.651 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 13:54:23.651 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 13:54:23.652 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 13:54:23.652 +01:00 [INF] Retrieving all patients
2025-04-14 13:54:23.652 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
2025-04-14 13:54:23.653 +01:00 [INF] Retrieved 6 patients
2025-04-14 13:54:23.653 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 0.9616ms.
2025-04-14 13:54:23.653 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.PatientDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 13:54:23.653 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) in 1.5425ms
2025-04-14 13:54:23.653 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 13:54:23.653 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients - 200 null application/json; charset=utf-8 1.9958ms
2025-04-14 13:54:25.384 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 13:54:25.384 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:54:25.385 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 13:54:25.385 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 13:54:25.386 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 1.8164ms
2025-04-14 13:54:27.319 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 13:54:27.319 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:54:27.319 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 13:54:27.320 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 13:54:27.320 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 1.1493ms
2025-04-14 13:54:29.425 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients - null null
2025-04-14 13:54:29.426 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:54:29.426 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 13:54:29.426 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 13:54:29.426 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 13:54:29.426 +01:00 [INF] Retrieving all patients
2025-04-14 13:54:29.427 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
2025-04-14 13:54:29.427 +01:00 [INF] Retrieved 6 patients
2025-04-14 13:54:29.427 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1.1251ms.
2025-04-14 13:54:29.427 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.PatientDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 13:54:29.427 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) in 1.6908ms
2025-04-14 13:54:29.428 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 13:54:29.428 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients - 200 null application/json; charset=utf-8 2.189ms
2025-04-14 13:54:30.661 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 13:54:30.661 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:54:30.661 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 13:54:30.661 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 13:54:30.661 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 0.5883ms
2025-04-14 13:55:42.933 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 13:55:42.933 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:55:42.933 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 13:55:42.933 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 13:55:42.934 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 0.578ms
2025-04-14 13:55:49.704 +01:00 [INF] Application is shutting down...
2025-04-14 13:56:00.317 +01:00 [INF] User profile is available. Using 'C:\Users\simon_adm\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-14 13:56:00.424 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 13:56:00.425 +01:00 [INF] Hosting environment: Development
2025-04-14 13:56:00.425 +01:00 [INF] Content root path: C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api
2025-04-14 13:56:00.444 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - null null
2025-04-14 13:56:00.636 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 192.838ms
2025-04-14 13:56:05.692 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 13:56:05.702 +01:00 [INF] CORS policy execution successful.
2025-04-14 13:56:05.771 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 13:56:05.774 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 13:56:05.776 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 84.404ms
2025-04-14 13:56:34.255 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 13:56:34.261 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 13:56:34.261 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 13:56:34.263 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 35.7003ms
2025-04-14 13:56:38.161 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 13:56:38.162 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 13:56:38.162 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 13:56:38.163 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 1.296ms
2025-04-14 13:56:57.276 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 13:56:57.276 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 13:56:57.276 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 13:56:57.277 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 0.8055ms
2025-04-14 13:57:08.920 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/ - null null
2025-04-14 13:57:08.922 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/ - 404 null null 1.4627ms
2025-04-14 13:57:08.923 +01:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:44372/, Response status code: 404
2025-04-14 13:57:55.129 +01:00 [INF] User profile is available. Using 'C:\Users\simon_adm\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-14 13:57:55.230 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 13:57:55.230 +01:00 [INF] Hosting environment: Development
2025-04-14 13:57:55.231 +01:00 [INF] Content root path: C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api
2025-04-14 13:57:55.248 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - null null
2025-04-14 13:57:55.437 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 190.1709ms
2025-04-14 13:58:48.690 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/Appointments - null null
2025-04-14 13:58:48.750 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 13:58:48.753 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 13:58:48.754 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/Appointments - 401 null null 65.1928ms
2025-04-14 14:02:20.424 +01:00 [INF] User profile is available. Using 'C:\Users\simon_adm\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-14 14:02:20.531 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 14:02:20.532 +01:00 [INF] Hosting environment: Development
2025-04-14 14:02:20.532 +01:00 [INF] Content root path: C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api
2025-04-14 14:02:20.550 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - null null
2025-04-14 14:02:20.743 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 193.6457ms
2025-04-14 14:02:42.670 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44372/api/Auth/login - application/json 55
2025-04-14 14:02:42.681 +01:00 [INF] CORS policy execution failed.
2025-04-14 14:02:42.681 +01:00 [INF] Request origin https://localhost:44372 does not have permission to access the resource.
2025-04-14 14:02:42.732 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 14:02:42.746 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(PANDA.Api.Controllers.LoginRequest) on controller PANDA.Api.Controllers.AuthController (PANDA.Api).
2025-04-14 14:02:42.811 +01:00 [INF] Executing action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api) - Validation state: "Valid"
2025-04-14 14:02:42.815 +01:00 [INF] Executed action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.UnauthorizedObjectResult in 1.3137ms.
2025-04-14 14:02:42.821 +01:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2025-04-14 14:02:42.824 +01:00 [INF] Executed action PANDA.Api.Controllers.AuthController.Login (PANDA.Api) in 76.9107ms
2025-04-14 14:02:42.825 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 14:02:42.825 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44372/api/Auth/login - 401 null text/plain; charset=utf-8 155.7793ms
2025-04-14 14:03:15.398 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44372/api/Auth/login - application/json 51
2025-04-14 14:03:15.401 +01:00 [INF] CORS policy execution failed.
2025-04-14 14:03:15.401 +01:00 [INF] Request origin https://localhost:44372 does not have permission to access the resource.
2025-04-14 14:03:15.405 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 14:03:15.406 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(PANDA.Api.Controllers.LoginRequest) on controller PANDA.Api.Controllers.AuthController (PANDA.Api).
2025-04-14 14:03:15.409 +01:00 [INF] Executing action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api) - Validation state: "Valid"
2025-04-14 15:26:38.817 +01:00 [INF] User profile is available. Using 'C:\Users\simon_adm\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-14 15:26:38.920 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 15:26:38.920 +01:00 [INF] Hosting environment: Development
2025-04-14 15:26:38.920 +01:00 [INF] Content root path: C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api
2025-04-14 15:26:38.938 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - null null
2025-04-14 15:26:39.124 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 186.1425ms
2025-04-14 15:33:04.409 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-04-14 15:33:04.429 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-04-14 15:33:04.436 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-04-14 15:33:04.443 +01:00 [INF] Applying migration '20250414143020_AddUserTableWithSeed'.
2025-04-14 15:33:04.464 +01:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Appointments" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Appointments" PRIMARY KEY AUTOINCREMENT,
    "PatientId" INTEGER NOT NULL,
    "PatientName" TEXT NOT NULL,
    "AppointmentDate" TEXT NOT NULL,
    "Status" INTEGER NOT NULL,
    "ClinicianId" INTEGER NOT NULL,
    "Clinician" TEXT NOT NULL,
    "Department" INTEGER NOT NULL,
    "MissedTimestamp" TEXT NULL
);
2025-04-14 15:36:48.187 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2025-04-14 15:36:48.238 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-04-14 15:36:48.243 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-04-14 15:36:48.244 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-04-14 15:36:48.251 +01:00 [INF] Applying migration '20250414143637_InitialCreate'.
2025-04-14 15:36:48.265 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Appointments" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Appointments" PRIMARY KEY AUTOINCREMENT,
    "PatientId" INTEGER NOT NULL,
    "PatientName" TEXT NOT NULL,
    "AppointmentDate" TEXT NOT NULL,
    "Status" INTEGER NOT NULL,
    "ClinicianId" INTEGER NOT NULL,
    "Clinician" TEXT NOT NULL,
    "Department" INTEGER NOT NULL,
    "MissedTimestamp" TEXT NULL
);
2025-04-14 15:36:48.267 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Clinicians" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Clinicians" PRIMARY KEY AUTOINCREMENT,
    "Name" TEXT NOT NULL,
    "Department" INTEGER NOT NULL
);
2025-04-14 15:36:48.268 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Patients" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Patients" PRIMARY KEY AUTOINCREMENT,
    "FirstName" TEXT NOT NULL,
    "LastName" TEXT NOT NULL,
    "DateOfBirth" TEXT NOT NULL,
    "Gender" INTEGER NULL,
    "NHSNumber" TEXT NOT NULL,
    "Postcode" TEXT NOT NULL
);
2025-04-14 15:36:48.269 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Users" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Users" PRIMARY KEY AUTOINCREMENT,
    "Username" TEXT NOT NULL,
    "PasswordHash" TEXT NOT NULL,
    "Role" TEXT NOT NULL
);
2025-04-14 15:36:48.270 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "PasswordHash", "Role", "Username")
VALUES (1, 'admin123', 'Admin', 'admin');
SELECT changes();

INSERT INTO "Users" ("Id", "PasswordHash", "Role", "Username")
VALUES (2, 'reception123', 'Reception', 'reception');
SELECT changes();

INSERT INTO "Users" ("Id", "PasswordHash", "Role", "Username")
VALUES (3, 'clinician123', 'Clinician', 'drchris');
SELECT changes();
2025-04-14 15:36:48.271 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250414143637_InitialCreate', '8.0.3');
2025-04-14 16:05:11.965 +01:00 [INF] User profile is available. Using 'C:\Users\simon_adm\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-14 16:05:12.030 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 16:05:12.031 +01:00 [INF] Hosting environment: Development
2025-04-14 16:05:12.031 +01:00 [INF] Content root path: C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api
2025-04-14 16:05:12.042 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - null null
2025-04-14 16:05:12.204 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 161.9864ms
2025-04-14 16:05:24.028 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 16:05:24.033 +01:00 [INF] CORS policy execution successful.
2025-04-14 16:05:24.051 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 16:05:24.054 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 16:05:24.055 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 26.9013ms
2025-04-14 16:05:26.298 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 16:05:26.299 +01:00 [INF] CORS policy execution successful.
2025-04-14 16:05:26.301 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 16:05:26.301 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 16:05:26.301 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 3.4433ms
2025-04-14 16:05:27.136 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 16:05:27.137 +01:00 [INF] CORS policy execution successful.
2025-04-14 16:05:27.137 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 16:05:27.138 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 16:05:27.138 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 1.5263ms
2025-04-14 16:05:27.737 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients - null null
2025-04-14 16:05:27.738 +01:00 [INF] CORS policy execution successful.
2025-04-14 16:05:27.739 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 16:05:27.751 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 16:05:27.822 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 16:05:27.824 +01:00 [INF] Retrieving all patients
2025-04-14 16:05:28.304 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
2025-04-14 16:05:28.316 +01:00 [INF] Retrieved 0 patients
2025-04-14 16:05:28.318 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 493.423ms.
2025-04-14 16:05:28.322 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.PatientDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 16:05:28.343 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) in 589.9202ms
2025-04-14 16:05:28.343 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 16:05:28.344 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The converter specified on 'PANDA.Shared.DTOs.PatientDto.DateOfBirth' is not compatible with the type 'System.DateOnly'.
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_SerializationConverterOnAttributeNotCompatible(Type classTypeAttributeIsOn, MemberInfo memberInfo, Type typeToConvert)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetConverterFromAttribute(JsonConverterAttribute converterAttribute, Type typeToConvert, MemberInfo memberInfo, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetCustomConverterForMember(Type typeToConvert, MemberInfo memberInfo, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreatePropertyInfo(JsonTypeInfo typeInfo, Type typeToConvert, MemberInfo memberInfo, NullabilityInfoContext nullabilityCtx, JsonSerializerOptions options, Boolean shouldCheckForRequiredKeyword, Boolean hasJsonIncludeAttribute)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.AddMember(JsonTypeInfo typeInfo, Type typeToConvert, MemberInfo memberInfo, NullabilityInfoContext nullabilityCtx, Boolean shouldCheckForRequiredKeyword, Boolean hasJsonIncludeAttribute, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.AddMembersDeclaredBySuperType(JsonTypeInfo typeInfo, Type currentType, NullabilityInfoContext nullabilityCtx, Boolean constructorHasSetsRequiredMembersAttribute, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.PopulateProperties(JsonTypeInfo typeInfo, NullabilityInfoContext nullabilityCtx)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreateTypeInfoCore(Type type, JsonConverter converter, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreateJsonTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoNoCaching(Type type)
   at System.Text.Json.JsonSerializerOptions.CachingContext.CreateCacheEntry(Type type, CachingContext context)
--- End of stack trace from previous location ---
   at System.Text.Json.JsonSerializerOptions.CachingContext.CacheEntry.GetResult()
   at System.Text.Json.JsonSerializerOptions.CachingContext.GetOrAddTypeInfo(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfo(Type type)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultAsync>g__Logged|22_0(ResourceInvoker invoker, IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-14 16:05:28.356 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients - 500 null text/plain; charset=utf-8 618.6479ms
2025-04-14 16:05:30.815 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients - null null
2025-04-14 16:05:30.815 +01:00 [INF] CORS policy execution successful.
2025-04-14 16:05:30.815 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 16:05:30.816 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 16:05:30.817 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 16:05:30.817 +01:00 [INF] Retrieving all patients
2025-04-14 16:05:30.826 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
2025-04-14 16:05:30.826 +01:00 [INF] Retrieved 0 patients
2025-04-14 16:05:30.826 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 9.7114ms.
2025-04-14 16:05:30.827 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.PatientDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 16:05:30.827 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) in 11.0752ms
2025-04-14 16:05:30.827 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 16:05:30.827 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The converter specified on 'PANDA.Shared.DTOs.PatientDto.DateOfBirth' is not compatible with the type 'System.DateOnly'.
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_SerializationConverterOnAttributeNotCompatible(Type classTypeAttributeIsOn, MemberInfo memberInfo, Type typeToConvert)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetConverterFromAttribute(JsonConverterAttribute converterAttribute, Type typeToConvert, MemberInfo memberInfo, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetCustomConverterForMember(Type typeToConvert, MemberInfo memberInfo, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreatePropertyInfo(JsonTypeInfo typeInfo, Type typeToConvert, MemberInfo memberInfo, NullabilityInfoContext nullabilityCtx, JsonSerializerOptions options, Boolean shouldCheckForRequiredKeyword, Boolean hasJsonIncludeAttribute)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.AddMember(JsonTypeInfo typeInfo, Type typeToConvert, MemberInfo memberInfo, NullabilityInfoContext nullabilityCtx, Boolean shouldCheckForRequiredKeyword, Boolean hasJsonIncludeAttribute, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.AddMembersDeclaredBySuperType(JsonTypeInfo typeInfo, Type currentType, NullabilityInfoContext nullabilityCtx, Boolean constructorHasSetsRequiredMembersAttribute, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.PopulateProperties(JsonTypeInfo typeInfo, NullabilityInfoContext nullabilityCtx)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreateTypeInfoCore(Type type, JsonConverter converter, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreateJsonTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoNoCaching(Type type)
   at System.Text.Json.JsonSerializerOptions.CachingContext.CreateCacheEntry(Type type, CachingContext context)
--- End of stack trace from previous location ---
   at System.Text.Json.JsonSerializerOptions.CachingContext.CacheEntry.GetResult()
   at System.Text.Json.JsonSerializerOptions.CachingContext.GetOrAddTypeInfo(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfo(Type type)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultAsync>g__Logged|22_0(ResourceInvoker invoker, IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-14 16:05:30.829 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients - 500 null text/plain; charset=utf-8 13.8625ms
2025-04-14 16:05:31.272 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 16:05:31.272 +01:00 [INF] CORS policy execution successful.
2025-04-14 16:05:31.273 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 16:05:31.273 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 16:05:31.273 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 0.6509ms
2025-04-14 16:05:31.615 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients - null null
2025-04-14 16:05:31.615 +01:00 [INF] CORS policy execution successful.
2025-04-14 16:05:31.615 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 16:05:31.615 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 16:05:31.617 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 16:05:31.617 +01:00 [INF] Retrieving all patients
2025-04-14 16:05:31.648 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
2025-04-14 16:05:31.648 +01:00 [INF] Retrieved 0 patients
2025-04-14 16:05:31.648 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 31.4026ms.
2025-04-14 16:05:31.648 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.PatientDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 16:05:31.649 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) in 33.3041ms
2025-04-14 16:05:31.649 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 16:05:31.649 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The converter specified on 'PANDA.Shared.DTOs.PatientDto.DateOfBirth' is not compatible with the type 'System.DateOnly'.
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_SerializationConverterOnAttributeNotCompatible(Type classTypeAttributeIsOn, MemberInfo memberInfo, Type typeToConvert)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetConverterFromAttribute(JsonConverterAttribute converterAttribute, Type typeToConvert, MemberInfo memberInfo, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetCustomConverterForMember(Type typeToConvert, MemberInfo memberInfo, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreatePropertyInfo(JsonTypeInfo typeInfo, Type typeToConvert, MemberInfo memberInfo, NullabilityInfoContext nullabilityCtx, JsonSerializerOptions options, Boolean shouldCheckForRequiredKeyword, Boolean hasJsonIncludeAttribute)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.AddMember(JsonTypeInfo typeInfo, Type typeToConvert, MemberInfo memberInfo, NullabilityInfoContext nullabilityCtx, Boolean shouldCheckForRequiredKeyword, Boolean hasJsonIncludeAttribute, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.AddMembersDeclaredBySuperType(JsonTypeInfo typeInfo, Type currentType, NullabilityInfoContext nullabilityCtx, Boolean constructorHasSetsRequiredMembersAttribute, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.PopulateProperties(JsonTypeInfo typeInfo, NullabilityInfoContext nullabilityCtx)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreateTypeInfoCore(Type type, JsonConverter converter, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreateJsonTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoNoCaching(Type type)
   at System.Text.Json.JsonSerializerOptions.CachingContext.CreateCacheEntry(Type type, CachingContext context)
--- End of stack trace from previous location ---
   at System.Text.Json.JsonSerializerOptions.CachingContext.CacheEntry.GetResult()
   at System.Text.Json.JsonSerializerOptions.CachingContext.GetOrAddTypeInfo(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfo(Type type)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultAsync>g__Logged|22_0(ResourceInvoker invoker, IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-14 16:05:31.650 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients - 500 null text/plain; charset=utf-8 35.0673ms
2025-04-14 16:05:45.218 +01:00 [INF] Application is shutting down...
2025-04-14 16:07:30.350 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2025-04-14 16:07:30.400 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-04-14 16:07:30.405 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-04-14 16:07:30.406 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-04-14 16:07:30.413 +01:00 [INF] Applying migration '20250414150722_SeedAllEntities'.
2025-04-14 16:07:30.427 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Appointments" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Appointments" PRIMARY KEY AUTOINCREMENT,
    "PatientId" INTEGER NOT NULL,
    "PatientName" TEXT NOT NULL,
    "AppointmentDate" TEXT NOT NULL,
    "Status" INTEGER NOT NULL,
    "ClinicianId" INTEGER NOT NULL,
    "Clinician" TEXT NOT NULL,
    "Department" INTEGER NOT NULL,
    "MissedTimestamp" TEXT NULL
);
2025-04-14 16:07:30.429 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Clinicians" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Clinicians" PRIMARY KEY AUTOINCREMENT,
    "FullName" TEXT NOT NULL,
    "Department" INTEGER NOT NULL,
    "Email" TEXT NOT NULL,
    "PhoneNumber" TEXT NOT NULL,
    "IsActive" INTEGER NOT NULL,
    "RegistrationNumber" TEXT NULL,
    "CreatedAt" TEXT NOT NULL
);
2025-04-14 16:07:30.430 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Patients" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Patients" PRIMARY KEY AUTOINCREMENT,
    "FirstName" TEXT NOT NULL,
    "LastName" TEXT NOT NULL,
    "DateOfBirth" TEXT NOT NULL,
    "Gender" INTEGER NULL,
    "NHSNumber" TEXT NOT NULL,
    "Postcode" TEXT NOT NULL
);
2025-04-14 16:07:30.431 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Users" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Users" PRIMARY KEY AUTOINCREMENT,
    "Username" TEXT NOT NULL,
    "PasswordHash" TEXT NOT NULL,
    "Role" TEXT NOT NULL
);
2025-04-14 16:07:30.432 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Appointments" ("Id", "AppointmentDate", "Clinician", "ClinicianId", "Department", "MissedTimestamp", "PatientId", "PatientName", "Status")
VALUES (1, '2025-05-01T11:00:00.0000000+01:00', 'Dr. Chris Carter', 1, 0, NULL, 1, 'John Doe', 0);
SELECT changes();

INSERT INTO "Appointments" ("Id", "AppointmentDate", "Clinician", "ClinicianId", "Department", "MissedTimestamp", "PatientId", "PatientName", "Status")
VALUES (2, '2025-05-02T15:30:00.0000000+01:00', 'Dr. Emma Reid', 2, 4, NULL, 2, 'Alice Smith', 0);
SELECT changes();
2025-04-14 16:07:30.433 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Clinicians" ("Id", "CreatedAt", "Department", "Email", "FullName", "IsActive", "PhoneNumber", "RegistrationNumber")
VALUES (1, '2025-04-14 15:07:22.7951273', 0, '', 'Dr. Chris Carter', 1, '', NULL);
SELECT changes();

INSERT INTO "Clinicians" ("Id", "CreatedAt", "Department", "Email", "FullName", "IsActive", "PhoneNumber", "RegistrationNumber")
VALUES (2, '2025-04-14 15:07:22.7951277', 4, '', 'Dr. Emma Reid', 1, '', NULL);
SELECT changes();
2025-04-14 16:07:30.434 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "PasswordHash", "Role", "Username")
VALUES (1, 'admin123', 'Admin', 'admin');
SELECT changes();

INSERT INTO "Users" ("Id", "PasswordHash", "Role", "Username")
VALUES (2, 'reception123', 'Reception', 'reception');
SELECT changes();

INSERT INTO "Users" ("Id", "PasswordHash", "Role", "Username")
VALUES (3, 'clinician123', 'Clinician', 'drchris');
SELECT changes();
2025-04-14 16:07:30.434 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250414150722_SeedAllEntities', '8.0.3');
2025-04-14 16:07:44.140 +01:00 [INF] User profile is available. Using 'C:\Users\simon_adm\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-14 16:07:44.206 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 16:07:44.206 +01:00 [INF] Hosting environment: Development
2025-04-14 16:07:44.206 +01:00 [INF] Content root path: C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api
2025-04-14 16:07:44.218 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - null null
2025-04-14 16:07:44.377 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 159.5513ms
2025-04-14 16:08:26.200 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients - null null
2025-04-14 16:08:26.205 +01:00 [INF] CORS policy execution successful.
2025-04-14 16:08:26.223 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 16:08:26.235 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 16:08:26.324 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 16:08:26.325 +01:00 [INF] Retrieving all patients
2025-04-14 16:08:26.897 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
2025-04-14 16:08:26.909 +01:00 [INF] Retrieved 0 patients
2025-04-14 16:08:26.912 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 585.5467ms.
2025-04-14 16:08:26.918 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.PatientDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 16:08:26.942 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) in 703.8386ms
2025-04-14 16:08:26.942 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 16:08:26.943 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The converter specified on 'PANDA.Shared.DTOs.PatientDto.DateOfBirth' is not compatible with the type 'System.DateOnly'.
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_SerializationConverterOnAttributeNotCompatible(Type classTypeAttributeIsOn, MemberInfo memberInfo, Type typeToConvert)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetConverterFromAttribute(JsonConverterAttribute converterAttribute, Type typeToConvert, MemberInfo memberInfo, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetCustomConverterForMember(Type typeToConvert, MemberInfo memberInfo, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreatePropertyInfo(JsonTypeInfo typeInfo, Type typeToConvert, MemberInfo memberInfo, NullabilityInfoContext nullabilityCtx, JsonSerializerOptions options, Boolean shouldCheckForRequiredKeyword, Boolean hasJsonIncludeAttribute)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.AddMember(JsonTypeInfo typeInfo, Type typeToConvert, MemberInfo memberInfo, NullabilityInfoContext nullabilityCtx, Boolean shouldCheckForRequiredKeyword, Boolean hasJsonIncludeAttribute, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.AddMembersDeclaredBySuperType(JsonTypeInfo typeInfo, Type currentType, NullabilityInfoContext nullabilityCtx, Boolean constructorHasSetsRequiredMembersAttribute, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.PopulateProperties(JsonTypeInfo typeInfo, NullabilityInfoContext nullabilityCtx)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreateTypeInfoCore(Type type, JsonConverter converter, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreateJsonTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoNoCaching(Type type)
   at System.Text.Json.JsonSerializerOptions.CachingContext.CreateCacheEntry(Type type, CachingContext context)
--- End of stack trace from previous location ---
   at System.Text.Json.JsonSerializerOptions.CachingContext.CacheEntry.GetResult()
   at System.Text.Json.JsonSerializerOptions.CachingContext.GetOrAddTypeInfo(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfo(Type type)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultAsync>g__Logged|22_0(ResourceInvoker invoker, IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-14 16:08:26.957 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients - 500 null text/plain; charset=utf-8 757.3829ms
2025-04-14 16:08:28.597 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 16:08:28.598 +01:00 [INF] CORS policy execution successful.
2025-04-14 16:08:28.601 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 16:08:28.605 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 16:08:28.605 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 8.5688ms
2025-04-14 16:08:30.511 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 16:08:30.511 +01:00 [INF] CORS policy execution successful.
2025-04-14 16:08:30.513 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 16:08:30.513 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 16:08:30.513 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 2.4376ms
2025-04-14 16:08:30.886 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 16:08:30.886 +01:00 [INF] CORS policy execution successful.
2025-04-14 16:08:30.887 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 16:08:30.887 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 16:08:30.887 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 1.4526ms
2025-04-14 16:08:31.270 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 16:08:31.270 +01:00 [INF] CORS policy execution successful.
2025-04-14 16:08:31.271 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 16:08:31.271 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 16:08:31.271 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 0.7178ms
2025-04-14 16:08:35.194 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 16:08:35.194 +01:00 [INF] CORS policy execution successful.
2025-04-14 16:08:35.195 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 16:08:35.195 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 16:08:35.195 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 0.6502ms
2025-04-14 16:09:32.281 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44372/api/Auth/login - application/json 59
2025-04-14 16:09:32.281 +01:00 [INF] CORS policy execution failed.
2025-04-14 16:09:32.282 +01:00 [INF] Request origin https://localhost:44372 does not have permission to access the resource.
2025-04-14 16:09:32.282 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 16:09:32.287 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(PANDA.Api.Controllers.LoginRequest) on controller PANDA.Api.Controllers.AuthController (PANDA.Api).
2025-04-14 16:09:32.315 +01:00 [INF] Executing action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api) - Validation state: "Valid"
2025-04-14 16:09:32.333 +01:00 [INF] Executed action PANDA.Api.Controllers.AuthController.Login (PANDA.Api) in 46.8048ms
2025-04-14 16:09:32.334 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 16:09:32.334 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentOutOfRangeException: IDX10720: Unable to create KeyedHashAlgorithm for algorithm 'HS256', the key size must be greater than: '256' bits, key has '192' bits. (Parameter 'keyBytes')
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.ValidateKeySize(Byte[] keyBytes, String algorithm, Int32 expectedNumberOfBytes)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateKeyedHashAlgorithm(Byte[] keyBytes, String algorithm)
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider.CreateKeyedHashAlgorithm()
   at Microsoft.IdentityModel.Tokens.DisposableObjectPool`1.CreateInstance()
   at Microsoft.IdentityModel.Tokens.DisposableObjectPool`1.Allocate()
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider.GetKeyedHashAlgorithm(Byte[] keyBytes, String algorithm)
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider.Sign(Byte[] input)
   at Microsoft.IdentityModel.JsonWebTokens.JwtTokenUtilities.CreateEncodedSignature(String input, SigningCredentials signingCredentials)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.WriteToken(SecurityToken token)
   at PANDA.Api.Controllers.AuthController.Login(LoginRequest request) in C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api\Controllers\AuthController.cs:line 49
   at lambda_method38(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-14 16:09:32.337 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44372/api/Auth/login - 500 null text/plain; charset=utf-8 55.95ms
2025-04-14 16:10:53.720 +01:00 [INF] Application is shutting down...
2025-04-14 16:10:59.134 +01:00 [INF] User profile is available. Using 'C:\Users\simon_adm\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-14 16:10:59.196 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 16:10:59.196 +01:00 [INF] Hosting environment: Development
2025-04-14 16:10:59.196 +01:00 [INF] Content root path: C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api
2025-04-14 16:10:59.207 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - null null
2025-04-14 16:10:59.360 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 154.1946ms
2025-04-14 16:11:05.708 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44372/api/Auth/login - application/json 59
2025-04-14 16:11:05.714 +01:00 [INF] CORS policy execution failed.
2025-04-14 16:11:05.714 +01:00 [INF] Request origin https://localhost:44372 does not have permission to access the resource.
2025-04-14 16:11:05.732 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 16:11:05.745 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(PANDA.Api.Controllers.LoginRequest) on controller PANDA.Api.Controllers.AuthController (PANDA.Api).
2025-04-14 16:11:05.797 +01:00 [INF] Executing action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api) - Validation state: "Valid"
2025-04-14 16:11:05.825 +01:00 [INF] Executed action PANDA.Api.Controllers.AuthController.Login (PANDA.Api) in 77.6619ms
2025-04-14 16:11:05.825 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 16:11:05.826 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentOutOfRangeException: IDX10720: Unable to create KeyedHashAlgorithm for algorithm 'HS256', the key size must be greater than: '256' bits, key has '192' bits. (Parameter 'keyBytes')
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.ValidateKeySize(Byte[] keyBytes, String algorithm, Int32 expectedNumberOfBytes)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateKeyedHashAlgorithm(Byte[] keyBytes, String algorithm)
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider.CreateKeyedHashAlgorithm()
   at Microsoft.IdentityModel.Tokens.DisposableObjectPool`1.CreateInstance()
   at Microsoft.IdentityModel.Tokens.DisposableObjectPool`1.Allocate()
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider.GetKeyedHashAlgorithm(Byte[] keyBytes, String algorithm)
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider.Sign(Byte[] input)
   at Microsoft.IdentityModel.JsonWebTokens.JwtTokenUtilities.CreateEncodedSignature(String input, SigningCredentials signingCredentials)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.WriteToken(SecurityToken token)
   at PANDA.Api.Controllers.AuthController.Login(LoginRequest request) in C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api\Controllers\AuthController.cs:line 49
   at lambda_method3(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-14 16:11:05.836 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44372/api/Auth/login - 500 null text/plain; charset=utf-8 128.6996ms
2025-04-14 16:11:24.587 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44372/api/Auth/login - application/json 59
2025-04-14 16:11:24.588 +01:00 [INF] CORS policy execution failed.
2025-04-14 16:11:24.588 +01:00 [INF] Request origin https://localhost:44372 does not have permission to access the resource.
2025-04-14 16:11:24.589 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 16:11:24.589 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(PANDA.Api.Controllers.LoginRequest) on controller PANDA.Api.Controllers.AuthController (PANDA.Api).
2025-04-14 16:11:24.591 +01:00 [INF] Executing action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api) - Validation state: "Valid"
2025-04-14 16:11:24.591 +01:00 [INF] Executed action PANDA.Api.Controllers.AuthController.Login (PANDA.Api) in 1.7448ms
2025-04-14 16:11:24.591 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 16:11:24.591 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentOutOfRangeException: IDX10720: Unable to create KeyedHashAlgorithm for algorithm 'HS256', the key size must be greater than: '256' bits, key has '192' bits. (Parameter 'keyBytes')
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.ValidateKeySize(Byte[] keyBytes, String algorithm, Int32 expectedNumberOfBytes)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateKeyedHashAlgorithm(Byte[] keyBytes, String algorithm)
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider.CreateKeyedHashAlgorithm()
   at Microsoft.IdentityModel.Tokens.DisposableObjectPool`1.CreateInstance()
   at Microsoft.IdentityModel.Tokens.DisposableObjectPool`1.Allocate()
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider.GetKeyedHashAlgorithm(Byte[] keyBytes, String algorithm)
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider.Sign(Byte[] input)
   at Microsoft.IdentityModel.JsonWebTokens.JwtTokenUtilities.CreateEncodedSignature(String input, SigningCredentials signingCredentials)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.WriteToken(SecurityToken token)
   at PANDA.Api.Controllers.AuthController.Login(LoginRequest request) in C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api\Controllers\AuthController.cs:line 49
   at lambda_method3(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-14 16:11:24.593 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44372/api/Auth/login - 500 null text/plain; charset=utf-8 6.0673ms
2025-04-14 16:25:02.645 +01:00 [INF] Application is shutting down...
2025-04-14 16:28:45.981 +01:00 [INF] User profile is available. Using 'C:\Users\simon_adm\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-14 16:28:46.083 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 16:28:46.084 +01:00 [INF] Hosting environment: Development
2025-04-14 16:28:46.084 +01:00 [INF] Content root path: C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api
2025-04-14 16:28:46.102 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - null null
2025-04-14 16:28:46.291 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 189.5064ms
2025-04-14 16:29:09.766 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44372/api/Auth/login - application/json 59
2025-04-14 16:29:09.775 +01:00 [INF] CORS policy execution failed.
2025-04-14 16:29:09.775 +01:00 [INF] Request origin https://localhost:44372 does not have permission to access the resource.
2025-04-14 16:29:09.822 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 16:29:09.834 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(PANDA.Api.Controllers.LoginRequest) on controller PANDA.Api.Controllers.AuthController (PANDA.Api).
2025-04-14 16:29:09.887 +01:00 [INF] Executing action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api) - Validation state: "Valid"
2025-04-14 16:40:20.721 +01:00 [INF] User profile is available. Using 'C:\Users\simon_adm\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-14 16:40:20.821 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 16:40:20.822 +01:00 [INF] Hosting environment: Development
2025-04-14 16:40:20.822 +01:00 [INF] Content root path: C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api
2025-04-14 16:40:20.839 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - null null
2025-04-14 16:40:21.022 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 183.8625ms
2025-04-14 16:41:56.298 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44372/api/Auth/login - application/json 59
2025-04-14 16:41:56.310 +01:00 [INF] CORS policy execution failed.
2025-04-14 16:41:56.310 +01:00 [INF] Request origin https://localhost:44372 does not have permission to access the resource.
2025-04-14 16:41:56.361 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 16:41:56.376 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(PANDA.Api.Controllers.LoginRequest) on controller PANDA.Api.Controllers.AuthController (PANDA.Api).
2025-04-14 16:41:56.443 +01:00 [INF] Executing action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api) - Validation state: "Valid"
2025-04-14 16:42:15.978 +01:00 [INF] Executed action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 19531.472ms.
2025-04-14 16:42:15.983 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-14 16:42:15.994 +01:00 [INF] Executed action PANDA.Api.Controllers.AuthController.Login (PANDA.Api) in 19615.9207ms
2025-04-14 16:42:15.994 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 16:42:15.994 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44372/api/Auth/login - 200 null application/json; charset=utf-8 19697.0875ms
2025-04-14 16:43:30.268 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/Appointments - null null
2025-04-14 16:43:30.278 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 16:43:30.281 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 16:43:30.281 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/Appointments - 401 null null 13.6832ms
2025-04-14 16:44:39.672 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 16:44:39.674 +01:00 [INF] CORS policy execution successful.
2025-04-14 16:44:39.675 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 16:44:39.676 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 16:44:39.679 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 6.8831ms
2025-04-14 16:44:40.717 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients - null null
2025-04-14 16:44:40.717 +01:00 [INF] CORS policy execution successful.
2025-04-14 16:44:40.717 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 16:44:40.721 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 16:44:40.844 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 16:44:40.845 +01:00 [INF] Retrieving all patients
2025-04-14 16:44:41.555 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
2025-04-14 16:44:41.567 +01:00 [INF] Retrieved 0 patients
2025-04-14 16:44:41.568 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 723.9813ms.
2025-04-14 16:44:41.568 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.PatientDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 16:44:41.578 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) in 857.5646ms
2025-04-14 16:44:41.579 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 16:44:41.580 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The converter specified on 'PANDA.Shared.DTOs.PatientDto.DateOfBirth' is not compatible with the type 'System.DateOnly'.
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_SerializationConverterOnAttributeNotCompatible(Type classTypeAttributeIsOn, MemberInfo memberInfo, Type typeToConvert)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetConverterFromAttribute(JsonConverterAttribute converterAttribute, Type typeToConvert, MemberInfo memberInfo, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetCustomConverterForMember(Type typeToConvert, MemberInfo memberInfo, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreatePropertyInfo(JsonTypeInfo typeInfo, Type typeToConvert, MemberInfo memberInfo, NullabilityInfoContext nullabilityCtx, JsonSerializerOptions options, Boolean shouldCheckForRequiredKeyword, Boolean hasJsonIncludeAttribute)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.AddMember(JsonTypeInfo typeInfo, Type typeToConvert, MemberInfo memberInfo, NullabilityInfoContext nullabilityCtx, Boolean shouldCheckForRequiredKeyword, Boolean hasJsonIncludeAttribute, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.AddMembersDeclaredBySuperType(JsonTypeInfo typeInfo, Type currentType, NullabilityInfoContext nullabilityCtx, Boolean constructorHasSetsRequiredMembersAttribute, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.PopulateProperties(JsonTypeInfo typeInfo, NullabilityInfoContext nullabilityCtx)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreateTypeInfoCore(Type type, JsonConverter converter, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreateJsonTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoNoCaching(Type type)
   at System.Text.Json.JsonSerializerOptions.CachingContext.CreateCacheEntry(Type type, CachingContext context)
--- End of stack trace from previous location ---
   at System.Text.Json.JsonSerializerOptions.CachingContext.CacheEntry.GetResult()
   at System.Text.Json.JsonSerializerOptions.CachingContext.GetOrAddTypeInfo(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfo(Type type)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultAsync>g__Logged|22_0(ResourceInvoker invoker, IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-14 16:44:41.603 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients - 500 null text/plain; charset=utf-8 886.0023ms
2025-04-14 16:45:00.718 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/auth/login - null null
2025-04-14 16:45:00.718 +01:00 [INF] CORS policy execution successful.
2025-04-14 16:45:00.719 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/auth/login - 204 null null 1.41ms
2025-04-14 16:45:00.721 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44372/api/auth/login - application/json; charset=utf-8 50
2025-04-14 16:45:00.721 +01:00 [INF] CORS policy execution successful.
2025-04-14 16:45:00.721 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 16:45:00.721 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(PANDA.Api.Controllers.LoginRequest) on controller PANDA.Api.Controllers.AuthController (PANDA.Api).
2025-04-14 16:45:00.723 +01:00 [INF] Executing action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api) - Validation state: "Valid"
2025-04-14 16:45:04.861 +01:00 [INF] Executed action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4137.6559ms.
2025-04-14 16:45:04.861 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-14 16:45:04.861 +01:00 [INF] Executed action PANDA.Api.Controllers.AuthController.Login (PANDA.Api) in 4139.8742ms
2025-04-14 16:45:04.861 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 16:45:04.862 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44372/api/auth/login - 200 null application/json; charset=utf-8 4140.5366ms
2025-04-14 16:45:29.305 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/appointments - null null
2025-04-14 16:45:29.333 +01:00 [INF] CORS policy execution successful.
2025-04-14 16:45:29.333 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/appointments - 204 null null 28.9231ms
2025-04-14 16:45:29.335 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 16:45:29.335 +01:00 [INF] CORS policy execution successful.
2025-04-14 16:45:29.347 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.MissingMethodException: Method not found: 'Byte[] Microsoft.IdentityModel.Tokens.Base64UrlEncoder.UnsafeDecode(System.ReadOnlySpan`1<Char>)'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-04-14 16:45:29.348 +01:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-04-14 16:45:29.348 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 16:45:29.349 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 16:45:29.349 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 14.769ms
2025-04-14 16:45:54.733 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 16:45:54.734 +01:00 [INF] CORS policy execution successful.
2025-04-14 16:45:54.761 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 16:45:54.761 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 16:45:54.762 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 28.6996ms
2025-04-14 16:53:50.735 +01:00 [INF] User profile is available. Using 'C:\Users\simon_adm\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-14 16:53:50.844 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 16:53:50.845 +01:00 [INF] Hosting environment: Development
2025-04-14 16:53:50.845 +01:00 [INF] Content root path: C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api
2025-04-14 16:53:50.863 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - null null
2025-04-14 16:53:51.049 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 187.1162ms
2025-04-14 16:53:57.525 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 16:53:57.534 +01:00 [INF] CORS policy execution successful.
2025-04-14 16:53:57.584 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 16:53:57.586 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 16:53:57.588 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 62.9584ms
2025-04-14 16:57:20.666 +01:00 [INF] User profile is available. Using 'C:\Users\simon_adm\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-14 16:57:20.776 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 16:57:20.776 +01:00 [INF] Hosting environment: Development
2025-04-14 16:57:20.776 +01:00 [INF] Content root path: C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api
2025-04-14 16:57:20.794 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - null null
2025-04-14 16:57:20.994 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 200.9055ms
2025-04-14 16:57:30.833 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/auth/login - null null
2025-04-14 16:57:30.840 +01:00 [INF] CORS policy execution successful.
2025-04-14 16:57:30.842 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/auth/login - 204 null null 9.5338ms
2025-04-14 16:57:30.844 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44372/api/auth/login - application/json; charset=utf-8 50
2025-04-14 16:57:30.845 +01:00 [INF] CORS policy execution successful.
2025-04-14 16:57:30.894 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 16:57:30.906 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(PANDA.Api.Controllers.LoginRequest) on controller PANDA.Api.Controllers.AuthController (PANDA.Api).
2025-04-14 16:57:30.960 +01:00 [INF] Executing action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api) - Validation state: "Valid"
2025-04-14 16:57:38.153 +01:00 [INF] Executed action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 7190.0194ms.
2025-04-14 16:57:38.158 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-14 16:57:38.168 +01:00 [INF] Executed action PANDA.Api.Controllers.AuthController.Login (PANDA.Api) in 7260.0684ms
2025-04-14 16:57:38.169 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 16:57:38.169 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44372/api/auth/login - 200 null application/json; charset=utf-8 7324.5877ms
2025-04-14 16:57:40.942 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 16:57:40.943 +01:00 [INF] CORS policy execution successful.
2025-04-14 16:57:40.950 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 16:57:40.953 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 16:57:40.954 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 11.3649ms
2025-04-14 16:57:58.909 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients - null null
2025-04-14 16:57:58.909 +01:00 [INF] CORS policy execution successful.
2025-04-14 16:57:58.910 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 16:57:58.914 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 16:57:59.030 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 16:57:59.031 +01:00 [INF] Retrieving all patients
2025-04-14 16:57:59.696 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
2025-04-14 16:57:59.710 +01:00 [INF] Retrieved 0 patients
2025-04-14 16:57:59.711 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 680.8428ms.
2025-04-14 16:57:59.711 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.PatientDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 16:57:59.721 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) in 807.1632ms
2025-04-14 16:57:59.722 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 16:57:59.722 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The converter specified on 'PANDA.Shared.DTOs.PatientDto.DateOfBirth' is not compatible with the type 'System.DateOnly'.
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_SerializationConverterOnAttributeNotCompatible(Type classTypeAttributeIsOn, MemberInfo memberInfo, Type typeToConvert)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetConverterFromAttribute(JsonConverterAttribute converterAttribute, Type typeToConvert, MemberInfo memberInfo, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetCustomConverterForMember(Type typeToConvert, MemberInfo memberInfo, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreatePropertyInfo(JsonTypeInfo typeInfo, Type typeToConvert, MemberInfo memberInfo, NullabilityInfoContext nullabilityCtx, JsonSerializerOptions options, Boolean shouldCheckForRequiredKeyword, Boolean hasJsonIncludeAttribute)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.AddMember(JsonTypeInfo typeInfo, Type typeToConvert, MemberInfo memberInfo, NullabilityInfoContext nullabilityCtx, Boolean shouldCheckForRequiredKeyword, Boolean hasJsonIncludeAttribute, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.AddMembersDeclaredBySuperType(JsonTypeInfo typeInfo, Type currentType, NullabilityInfoContext nullabilityCtx, Boolean constructorHasSetsRequiredMembersAttribute, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.PopulateProperties(JsonTypeInfo typeInfo, NullabilityInfoContext nullabilityCtx)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreateTypeInfoCore(Type type, JsonConverter converter, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreateJsonTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoNoCaching(Type type)
   at System.Text.Json.JsonSerializerOptions.CachingContext.CreateCacheEntry(Type type, CachingContext context)
--- End of stack trace from previous location ---
   at System.Text.Json.JsonSerializerOptions.CachingContext.CacheEntry.GetResult()
   at System.Text.Json.JsonSerializerOptions.CachingContext.GetOrAddTypeInfo(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfo(Type type)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultAsync>g__Logged|22_0(ResourceInvoker invoker, IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-14 16:57:59.751 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients - 500 null text/plain; charset=utf-8 841.9941ms
2025-04-14 16:58:00.840 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 16:58:00.840 +01:00 [INF] CORS policy execution successful.
2025-04-14 16:58:00.841 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 16:58:00.842 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 16:58:00.842 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 1.9478ms
2025-04-14 17:00:40.657 +01:00 [INF] User profile is available. Using 'C:\Users\simon_adm\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-14 17:00:40.764 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 17:00:40.765 +01:00 [INF] Hosting environment: Development
2025-04-14 17:00:40.765 +01:00 [INF] Content root path: C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api
2025-04-14 17:00:40.782 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - null null
2025-04-14 17:00:40.973 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 191.2836ms
2025-04-14 17:00:51.361 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/appointments - null null
2025-04-14 17:00:51.370 +01:00 [INF] CORS policy execution successful.
2025-04-14 17:00:51.372 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/appointments - 204 null null 12.4143ms
2025-04-14 17:00:51.375 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 17:00:51.377 +01:00 [INF] CORS policy execution successful.
2025-04-14 17:00:51.452 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.MissingMethodException: Method not found: 'Byte[] Microsoft.IdentityModel.Tokens.Base64UrlEncoder.UnsafeDecode(System.ReadOnlySpan`1<Char>)'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-04-14 17:00:51.475 +01:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-04-14 17:00:51.479 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 17:00:51.483 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 17:00:51.484 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 108.8172ms
2025-04-14 17:00:56.002 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/auth/login - null null
2025-04-14 17:00:56.002 +01:00 [INF] CORS policy execution successful.
2025-04-14 17:00:56.003 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/auth/login - 204 null null 0.6144ms
2025-04-14 17:00:56.004 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44372/api/auth/login - application/json; charset=utf-8 50
2025-04-14 17:00:56.004 +01:00 [INF] CORS policy execution successful.
2025-04-14 17:00:56.007 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 17:00:56.021 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(PANDA.Api.Controllers.LoginRequest) on controller PANDA.Api.Controllers.AuthController (PANDA.Api).
2025-04-14 17:00:56.086 +01:00 [INF] Executing action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api) - Validation state: "Valid"
2025-04-14 17:00:56.120 +01:00 [INF] Executed action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 31.0163ms.
2025-04-14 17:00:56.124 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-14 17:00:56.137 +01:00 [INF] Executed action PANDA.Api.Controllers.AuthController.Login (PANDA.Api) in 112.9141ms
2025-04-14 17:00:56.137 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 17:00:56.137 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44372/api/auth/login - 200 null application/json; charset=utf-8 132.9609ms
2025-04-14 17:01:00.119 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/appointments - null null
2025-04-14 17:01:00.119 +01:00 [INF] CORS policy execution successful.
2025-04-14 17:01:00.119 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/appointments - 204 null null 0.5289ms
2025-04-14 17:01:00.120 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 17:01:00.120 +01:00 [INF] CORS policy execution successful.
2025-04-14 17:01:00.121 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.MissingMethodException: Method not found: 'Byte[] Microsoft.IdentityModel.Tokens.Base64UrlEncoder.UnsafeDecode(System.ReadOnlySpan`1<Char>)'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-04-14 17:01:00.122 +01:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-04-14 17:01:00.122 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 17:01:00.123 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 17:01:00.123 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 2.6842ms
2025-04-14 17:40:25.206 +01:00 [INF] User profile is available. Using 'C:\Users\simon_adm\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-14 17:40:25.333 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 17:40:25.337 +01:00 [INF] Hosting environment: Development
2025-04-14 17:40:25.338 +01:00 [INF] Content root path: C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api
2025-04-14 17:40:25.384 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger - null null
2025-04-14 17:40:25.437 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/index.html - null null
2025-04-14 17:40:25.447 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger - 301 null null 64.194ms
2025-04-14 17:40:25.550 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/index.html - 200 null text/html;charset=utf-8 114.8236ms
2025-04-14 17:40:25.559 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/index.css - null null
2025-04-14 17:40:25.562 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/index.js - null null
2025-04-14 17:40:25.562 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/swagger-ui-standalone-preset.js - null null
2025-04-14 17:40:25.562 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/swagger-ui-bundle.js - null null
2025-04-14 17:40:25.562 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/swagger-ui.css - null null
2025-04-14 17:40:25.566 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/index.js - 200 null application/javascript;charset=utf-8 4.2008ms
2025-04-14 17:40:25.580 +01:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-04-14 17:40:25.580 +01:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-04-14 17:40:25.580 +01:00 [INF] Sending file. Request path: '/index.css'. Physical path: 'N/A'
2025-04-14 17:40:25.580 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/index.css - 200 202 text/css 21.0067ms
2025-04-14 17:40:25.584 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/swagger-ui.css - 200 154948 text/css 21.7913ms
2025-04-14 17:40:25.584 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/swagger-ui-standalone-preset.js - 200 229223 text/javascript 22.1311ms
2025-04-14 17:40:25.588 +01:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-04-14 17:40:25.602 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/swagger-ui-bundle.js - 200 1466741 text/javascript 40.4525ms
2025-04-14 17:40:25.759 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - null null
2025-04-14 17:40:25.924 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 164.6273ms
2025-04-14 17:40:40.373 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/auth/login - null null
2025-04-14 17:40:40.379 +01:00 [INF] CORS policy execution successful.
2025-04-14 17:40:40.380 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/auth/login - 204 null null 6.923ms
2025-04-14 17:40:40.382 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44372/api/auth/login - application/json; charset=utf-8 50
2025-04-14 17:40:40.383 +01:00 [INF] CORS policy execution successful.
2025-04-14 17:40:40.449 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 17:40:40.462 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(PANDA.Api.Controllers.LoginRequest) on controller PANDA.Api.Controllers.AuthController (PANDA.Api).
2025-04-14 17:40:40.521 +01:00 [INF] Executing action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api) - Validation state: "Valid"
2025-04-14 17:40:40.557 +01:00 [INF] Executed action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 33.7317ms.
2025-04-14 17:40:40.561 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-14 17:40:40.570 +01:00 [INF] Executed action PANDA.Api.Controllers.AuthController.Login (PANDA.Api) in 104.94ms
2025-04-14 17:40:40.570 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 17:40:40.570 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44372/api/auth/login - 200 null application/json; charset=utf-8 187.8988ms
2025-04-14 17:40:41.963 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/appointments - null null
2025-04-14 17:40:41.963 +01:00 [INF] CORS policy execution successful.
2025-04-14 17:40:41.964 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/appointments - 204 null null 0.7823ms
2025-04-14 17:40:41.965 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 17:40:41.965 +01:00 [INF] CORS policy execution successful.
2025-04-14 17:40:41.975 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.MissingMethodException: Method not found: 'Byte[] Microsoft.IdentityModel.Tokens.Base64UrlEncoder.UnsafeDecode(System.ReadOnlySpan`1<Char>)'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-04-14 17:40:41.997 +01:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-04-14 17:40:42.000 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 17:40:42.005 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 17:40:42.006 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 41.0022ms
2025-04-14 17:40:47.669 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/appointments - null null
2025-04-14 17:40:47.669 +01:00 [INF] CORS policy execution successful.
2025-04-14 17:40:47.670 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/appointments - 204 null null 0.5418ms
2025-04-14 17:40:47.671 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 17:40:47.671 +01:00 [INF] CORS policy execution successful.
2025-04-14 17:40:47.672 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.MissingMethodException: Method not found: 'Byte[] Microsoft.IdentityModel.Tokens.Base64UrlEncoder.UnsafeDecode(System.ReadOnlySpan`1<Char>)'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-04-14 17:40:47.672 +01:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-04-14 17:40:47.673 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 17:40:47.673 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 17:40:47.674 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 2.8771ms
2025-04-14 17:41:36.508 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 17:41:36.510 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 17:41:36.510 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 17:41:36.510 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 2.7101ms
2025-04-14 17:43:12.553 +01:00 [INF] User profile is available. Using 'C:\Users\simon_adm\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-14 17:43:12.666 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 17:43:12.666 +01:00 [INF] Hosting environment: Development
2025-04-14 17:43:12.666 +01:00 [INF] Content root path: C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api
2025-04-14 17:43:12.686 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - null null
2025-04-14 17:43:12.892 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 206.596ms
2025-04-14 17:45:39.485 +01:00 [INF] User profile is available. Using 'C:\Users\simon_adm\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-14 17:45:39.612 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 17:45:39.617 +01:00 [INF] Hosting environment: Development
2025-04-14 17:45:39.617 +01:00 [INF] Content root path: C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api
2025-04-14 17:45:39.652 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger - null null
2025-04-14 17:45:39.699 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/index.html - null null
2025-04-14 17:45:39.711 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger - 301 null null 59.4158ms
2025-04-14 17:45:39.810 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/index.html - 200 null text/html;charset=utf-8 111.7756ms
2025-04-14 17:45:39.825 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/swagger-ui-bundle.js - null null
2025-04-14 17:45:39.825 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/index.css - null null
2025-04-14 17:45:39.826 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/swagger-ui.css - null null
2025-04-14 17:45:39.841 +01:00 [INF] Sending file. Request path: '/index.css'. Physical path: 'N/A'
2025-04-14 17:45:39.841 +01:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-04-14 17:45:39.841 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/index.css - 200 202 text/css 15.5643ms
2025-04-14 17:45:39.844 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/swagger-ui.css - 200 154948 text/css 18.3221ms
2025-04-14 17:45:39.855 +01:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-04-14 17:45:39.872 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/swagger-ui-bundle.js - 200 1466741 text/javascript 46.4181ms
2025-04-14 17:45:39.880 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/index.js - null null
2025-04-14 17:45:39.880 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/swagger-ui-standalone-preset.js - null null
2025-04-14 17:45:39.881 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/index.js - 200 null application/javascript;charset=utf-8 1.2999ms
2025-04-14 17:45:39.885 +01:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-04-14 17:45:39.887 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/swagger-ui-standalone-preset.js - 200 229223 text/javascript 6.7432ms
2025-04-14 17:45:40.064 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - null null
2025-04-14 17:45:40.203 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 138.9381ms
2025-04-14 17:45:53.095 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/auth/login - null null
2025-04-14 17:45:53.100 +01:00 [INF] CORS policy execution successful.
2025-04-14 17:45:53.101 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/auth/login - 204 null null 6.5452ms
2025-04-14 17:45:53.104 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44372/api/auth/login - application/json; charset=utf-8 50
2025-04-14 17:45:53.105 +01:00 [INF] CORS policy execution successful.
2025-04-14 17:45:53.169 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 17:45:53.184 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(PANDA.Api.Controllers.LoginRequest) on controller PANDA.Api.Controllers.AuthController (PANDA.Api).
2025-04-14 17:45:53.244 +01:00 [INF] Executing action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api) - Validation state: "Valid"
2025-04-14 17:45:53.282 +01:00 [INF] Executed action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 35.3718ms.
2025-04-14 17:45:53.286 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-14 17:45:53.294 +01:00 [INF] Executed action PANDA.Api.Controllers.AuthController.Login (PANDA.Api) in 108.0636ms
2025-04-14 17:45:53.294 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 17:45:53.295 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44372/api/auth/login - 200 null application/json; charset=utf-8 190.3722ms
2025-04-14 17:45:56.864 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/appointments - null null
2025-04-14 17:45:56.865 +01:00 [INF] CORS policy execution successful.
2025-04-14 17:45:56.865 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/appointments - 204 null null 1.1421ms
2025-04-14 17:45:56.867 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 17:45:56.867 +01:00 [INF] CORS policy execution successful.
2025-04-14 17:45:56.883 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.MissingMethodException: Method not found: 'Byte[] Microsoft.IdentityModel.Tokens.Base64UrlEncoder.UnsafeDecode(System.ReadOnlySpan`1<Char>)'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-04-14 17:45:56.918 +01:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-04-14 17:45:56.922 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 17:45:56.925 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 17:45:56.926 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 58.8948ms
2025-04-14 17:47:15.867 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/appointments - null null
2025-04-14 17:47:15.868 +01:00 [INF] CORS policy execution successful.
2025-04-14 17:47:15.869 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/appointments - 204 null null 2.0506ms
2025-04-14 17:47:15.870 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 17:47:15.871 +01:00 [INF] CORS policy execution successful.
2025-04-14 17:47:15.872 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.MissingMethodException: Method not found: 'Byte[] Microsoft.IdentityModel.Tokens.Base64UrlEncoder.UnsafeDecode(System.ReadOnlySpan`1<Char>)'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-04-14 17:47:15.872 +01:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-04-14 17:47:15.874 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 17:47:15.875 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 17:47:15.876 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 5.6424ms
2025-04-14 19:27:15.365 +01:00 [INF] User profile is available. Using 'C:\Users\simon_adm\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-14 19:27:15.466 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 19:27:15.466 +01:00 [INF] Hosting environment: Development
2025-04-14 19:27:15.466 +01:00 [INF] Content root path: C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api
2025-04-14 19:27:15.483 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - null null
2025-04-14 19:27:15.666 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 183.019ms
2025-04-14 19:27:28.739 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/appointments - null null
2025-04-14 19:27:28.747 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:27:28.749 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/appointments - 204 null null 11.7281ms
2025-04-14 19:27:28.752 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 19:27:28.754 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:27:28.818 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.MissingMethodException: Method not found: 'Byte[] Microsoft.IdentityModel.Tokens.Base64UrlEncoder.UnsafeDecode(System.ReadOnlySpan`1<Char>)'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-04-14 19:27:28.838 +01:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-04-14 19:27:28.841 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 19:27:28.844 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 19:27:28.845 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 92.9059ms
2025-04-14 19:27:33.857 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/auth/login - null null
2025-04-14 19:27:33.858 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:27:33.858 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/auth/login - 204 null null 0.6772ms
2025-04-14 19:27:33.861 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44372/api/auth/login - application/json; charset=utf-8 50
2025-04-14 19:27:33.861 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:27:33.864 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 19:27:33.877 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(PANDA.Api.Controllers.LoginRequest) on controller PANDA.Api.Controllers.AuthController (PANDA.Api).
2025-04-14 19:27:33.934 +01:00 [INF] Executing action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api) - Validation state: "Valid"
2025-04-14 19:27:33.964 +01:00 [INF] Executed action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 27.131ms.
2025-04-14 19:27:33.967 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-14 19:27:33.978 +01:00 [INF] Executed action PANDA.Api.Controllers.AuthController.Login (PANDA.Api) in 98.8089ms
2025-04-14 19:27:33.978 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 19:27:33.978 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44372/api/auth/login - 200 null application/json; charset=utf-8 117.2011ms
2025-04-14 19:27:35.673 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/appointments - null null
2025-04-14 19:27:35.674 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:27:35.674 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/appointments - 204 null null 0.4774ms
2025-04-14 19:27:35.675 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 19:27:35.675 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:27:35.676 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.MissingMethodException: Method not found: 'Byte[] Microsoft.IdentityModel.Tokens.Base64UrlEncoder.UnsafeDecode(System.ReadOnlySpan`1<Char>)'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-04-14 19:27:35.676 +01:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-04-14 19:27:35.677 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 19:27:35.677 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 19:27:35.678 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 3.4228ms
2025-04-14 19:33:58.312 +01:00 [INF] User profile is available. Using 'C:\Users\simon_adm\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-14 19:33:58.434 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 19:33:58.439 +01:00 [INF] Hosting environment: Development
2025-04-14 19:33:58.439 +01:00 [INF] Content root path: C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api
2025-04-14 19:33:58.461 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - null null
2025-04-14 19:33:58.679 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 218.6599ms
2025-04-14 19:34:00.142 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/appointments - null null
2025-04-14 19:34:00.151 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:34:00.152 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/appointments - 204 null null 10.7633ms
2025-04-14 19:34:00.155 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 19:34:00.157 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:34:00.231 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.MissingMethodException: Method not found: 'Void Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(System.ReadOnlySpan`1<Char>, System.Span`1<Byte>)'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-04-14 19:34:00.252 +01:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-04-14 19:34:00.255 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 19:34:00.258 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 19:34:00.259 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 103.9638ms
2025-04-14 19:34:08.653 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/auth/login - null null
2025-04-14 19:34:08.653 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:34:08.654 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/auth/login - 204 null null 0.7516ms
2025-04-14 19:34:08.657 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44372/api/auth/login - application/json; charset=utf-8 50
2025-04-14 19:34:08.657 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:34:08.660 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 19:34:08.673 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(PANDA.Api.Controllers.LoginRequest) on controller PANDA.Api.Controllers.AuthController (PANDA.Api).
2025-04-14 19:34:08.730 +01:00 [INF] Executing action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api) - Validation state: "Valid"
2025-04-14 19:34:08.763 +01:00 [INF] Executed action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 29.8411ms.
2025-04-14 19:34:08.767 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-14 19:34:08.778 +01:00 [INF] Executed action PANDA.Api.Controllers.AuthController.Login (PANDA.Api) in 102.0574ms
2025-04-14 19:34:08.778 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 19:34:08.778 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44372/api/auth/login - 200 null application/json; charset=utf-8 121.2266ms
2025-04-14 19:34:13.274 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/appointments - null null
2025-04-14 19:34:13.274 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:34:13.274 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/appointments - 204 null null 0.6524ms
2025-04-14 19:34:13.277 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 19:34:13.277 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:34:13.278 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.MissingMethodException: Method not found: 'Void Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(System.ReadOnlySpan`1<Char>, System.Span`1<Byte>)'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-04-14 19:34:13.278 +01:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-04-14 19:34:13.279 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 19:34:13.279 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 19:34:13.279 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 2.7262ms
2025-04-14 19:36:04.715 +01:00 [INF] User profile is available. Using 'C:\Users\simon_adm\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-14 19:36:04.827 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 19:36:04.828 +01:00 [INF] Hosting environment: Development
2025-04-14 19:36:04.828 +01:00 [INF] Content root path: C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api
2025-04-14 19:36:04.847 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - null null
2025-04-14 19:36:05.048 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 202.0209ms
2025-04-14 19:36:13.338 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/auth/login - null null
2025-04-14 19:36:13.347 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:36:13.349 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/auth/login - 204 null null 12.2759ms
2025-04-14 19:36:13.351 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44372/api/auth/login - application/json; charset=utf-8 50
2025-04-14 19:36:13.352 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:36:13.411 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 19:36:13.424 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(PANDA.Api.Controllers.LoginRequest) on controller PANDA.Api.Controllers.AuthController (PANDA.Api).
2025-04-14 19:36:13.484 +01:00 [INF] Executing action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api) - Validation state: "Valid"
2025-04-14 19:36:13.521 +01:00 [INF] Executed action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 34.0411ms.
2025-04-14 19:36:13.526 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-14 19:36:13.537 +01:00 [INF] Executed action PANDA.Api.Controllers.AuthController.Login (PANDA.Api) in 110.4976ms
2025-04-14 19:36:13.537 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 19:36:13.537 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44372/api/auth/login - 200 null application/json; charset=utf-8 186.3928ms
2025-04-14 19:36:15.587 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/appointments - null null
2025-04-14 19:36:15.587 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:36:15.587 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/appointments - 204 null null 0.6905ms
2025-04-14 19:36:15.589 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 19:36:15.590 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:36:15.604 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.MissingMethodException: Method not found: 'Void Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(System.ReadOnlySpan`1<Char>, System.Span`1<Byte>)'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-04-14 19:36:15.625 +01:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-04-14 19:36:15.628 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 19:36:15.632 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 19:36:15.632 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 43.4022ms
2025-04-14 19:39:59.653 +01:00 [INF] User profile is available. Using 'C:\Users\simon_adm\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-14 19:39:59.811 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 19:39:59.812 +01:00 [INF] Hosting environment: Development
2025-04-14 19:39:59.812 +01:00 [INF] Content root path: C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api
2025-04-14 19:39:59.837 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - null null
2025-04-14 19:40:00.099 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 263.4376ms
2025-04-14 19:40:08.925 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/auth/login - null null
2025-04-14 19:40:08.933 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:40:08.935 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/auth/login - 204 null null 10.9234ms
2025-04-14 19:40:08.938 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44372/api/auth/login - application/json; charset=utf-8 50
2025-04-14 19:40:08.939 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:40:08.978 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 19:40:08.991 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(PANDA.Api.Controllers.LoginRequest) on controller PANDA.Api.Controllers.AuthController (PANDA.Api).
2025-04-14 19:40:09.050 +01:00 [INF] Executing action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api) - Validation state: "Valid"
2025-04-14 19:40:09.087 +01:00 [INF] Executed action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 33.9956ms.
2025-04-14 19:40:09.092 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-14 19:40:09.103 +01:00 [INF] Executed action PANDA.Api.Controllers.AuthController.Login (PANDA.Api) in 109.4026ms
2025-04-14 19:40:09.103 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 19:40:09.103 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44372/api/auth/login - 200 null application/json; charset=utf-8 165.7461ms
2025-04-14 19:40:10.364 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/appointments - null null
2025-04-14 19:40:10.364 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:40:10.364 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/appointments - 204 null null 0.7243ms
2025-04-14 19:40:10.366 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 19:40:10.366 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:40:10.381 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.MissingMethodException: Method not found: 'Void Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(System.ReadOnlySpan`1<Char>, System.Span`1<Byte>)'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-04-14 19:40:10.401 +01:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-04-14 19:40:10.405 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 19:40:10.408 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 19:40:10.409 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 43.1227ms
2025-04-14 19:41:40.551 +01:00 [INF] User profile is available. Using 'C:\Users\simon_adm\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-14 19:41:40.665 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 19:41:40.665 +01:00 [INF] Hosting environment: Development
2025-04-14 19:41:40.665 +01:00 [INF] Content root path: C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api
2025-04-14 19:41:40.683 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - null null
2025-04-14 19:41:40.899 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 217.5114ms
2025-04-14 19:41:54.696 +01:00 [INF] User profile is available. Using 'C:\Users\simon_adm\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-14 19:41:54.803 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 19:41:54.804 +01:00 [INF] Hosting environment: Development
2025-04-14 19:41:54.804 +01:00 [INF] Content root path: C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api
2025-04-14 19:41:54.822 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - null null
2025-04-14 19:41:55.024 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 203.0242ms
2025-04-14 19:41:57.387 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/appointments - null null
2025-04-14 19:41:57.395 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:41:57.396 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/appointments - 204 null null 10.5433ms
2025-04-14 19:41:57.398 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 19:41:57.399 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:41:57.447 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[Security Artifact of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/SecurityArtifactLogging.]' as Base64Url encoded string.
 ---> System.MissingMethodException: Method not found: 'Void Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(System.ReadOnlySpan`1<Char>, System.Span`1<Byte>)'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-04-14 19:41:57.468 +01:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-04-14 19:41:57.472 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 19:41:57.475 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 19:41:57.476 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 78.5958ms
2025-04-14 19:42:01.653 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/auth/login - null null
2025-04-14 19:42:01.653 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:42:01.653 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/auth/login - 204 null null 0.6761ms
2025-04-14 19:42:01.655 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44372/api/auth/login - application/json; charset=utf-8 50
2025-04-14 19:42:01.655 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:42:01.658 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 19:42:01.671 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(PANDA.Api.Controllers.LoginRequest) on controller PANDA.Api.Controllers.AuthController (PANDA.Api).
2025-04-14 19:42:01.729 +01:00 [INF] Executing action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api) - Validation state: "Valid"
2025-04-14 19:42:01.762 +01:00 [INF] Executed action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 29.4877ms.
2025-04-14 19:42:01.767 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-14 19:42:01.779 +01:00 [INF] Executed action PANDA.Api.Controllers.AuthController.Login (PANDA.Api) in 105.9489ms
2025-04-14 19:42:01.780 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 19:42:01.780 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44372/api/auth/login - 200 null application/json; charset=utf-8 124.6721ms
2025-04-14 19:42:02.922 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/appointments - null null
2025-04-14 19:42:02.922 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:42:02.922 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/appointments - 204 null null 0.537ms
2025-04-14 19:42:02.923 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 19:42:02.923 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:42:02.925 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[Security Artifact of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/SecurityArtifactLogging.]' as Base64Url encoded string.
 ---> System.MissingMethodException: Method not found: 'Void Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(System.ReadOnlySpan`1<Char>, System.Span`1<Byte>)'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-04-14 19:42:02.925 +01:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-04-14 19:42:02.926 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 19:42:02.926 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 19:42:02.926 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 3.2058ms
2025-04-14 19:43:44.250 +01:00 [INF] User profile is available. Using 'C:\Users\simon_adm\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-14 19:43:44.370 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 19:43:44.371 +01:00 [INF] Hosting environment: Development
2025-04-14 19:43:44.371 +01:00 [INF] Content root path: C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api
2025-04-14 19:43:44.389 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - null null
2025-04-14 19:43:44.590 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 201.3886ms
2025-04-14 19:44:02.209 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/auth/login - null null
2025-04-14 19:44:02.217 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:44:02.219 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/auth/login - 204 null null 11.2736ms
2025-04-14 19:44:02.222 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44372/api/auth/login - application/json; charset=utf-8 50
2025-04-14 19:44:02.223 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:44:02.255 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 19:44:02.267 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(PANDA.Api.Controllers.LoginRequest) on controller PANDA.Api.Controllers.AuthController (PANDA.Api).
2025-04-14 19:44:02.323 +01:00 [INF] Executing action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api) - Validation state: "Valid"
2025-04-14 19:44:02.357 +01:00 [INF] Executed action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 31.4077ms.
2025-04-14 19:44:02.363 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-14 19:44:02.373 +01:00 [INF] Executed action PANDA.Api.Controllers.AuthController.Login (PANDA.Api) in 103.8577ms
2025-04-14 19:44:02.373 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 19:44:02.373 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44372/api/auth/login - 200 null application/json; charset=utf-8 151.817ms
2025-04-14 19:44:10.516 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/auth/login - null null
2025-04-14 19:44:10.516 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:44:10.516 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/auth/login - 204 null null 0.6767ms
2025-04-14 19:44:10.518 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44372/api/auth/login - application/json; charset=utf-8 50
2025-04-14 19:44:10.518 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:44:10.519 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 19:44:10.520 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(PANDA.Api.Controllers.LoginRequest) on controller PANDA.Api.Controllers.AuthController (PANDA.Api).
2025-04-14 19:44:10.523 +01:00 [INF] Executing action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api) - Validation state: "Valid"
2025-04-14 19:44:10.523 +01:00 [INF] Executed action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 0.3094ms.
2025-04-14 19:44:10.523 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-14 19:44:10.524 +01:00 [INF] Executed action PANDA.Api.Controllers.AuthController.Login (PANDA.Api) in 3.7205ms
2025-04-14 19:44:10.524 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 19:44:10.524 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44372/api/auth/login - 200 null application/json; charset=utf-8 5.4658ms
2025-04-14 19:44:12.074 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/appointments - null null
2025-04-14 19:44:12.075 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:44:12.075 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/appointments - 204 null null 0.5153ms
2025-04-14 19:44:12.076 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 19:44:12.077 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:44:12.089 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[Security Artifact of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/SecurityArtifactLogging.]' as Base64Url encoded string.
 ---> System.MissingMethodException: Method not found: 'Void Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(System.ReadOnlySpan`1<Char>, System.Span`1<Byte>)'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-04-14 19:44:12.108 +01:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-04-14 19:44:12.110 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 19:44:12.114 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 19:44:12.114 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 37.7439ms
2025-04-14 19:45:29.034 +01:00 [INF] User profile is available. Using 'C:\Users\simon_adm\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-14 19:45:29.146 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 19:45:29.146 +01:00 [INF] Hosting environment: Development
2025-04-14 19:45:29.146 +01:00 [INF] Content root path: C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api
2025-04-14 19:45:29.165 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - null null
2025-04-14 19:45:29.352 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 187.9007ms
2025-04-14 19:45:53.241 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/auth/login - null null
2025-04-14 19:45:53.250 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:45:53.252 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/auth/login - 204 null null 11.5621ms
2025-04-14 19:45:53.254 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44372/api/auth/login - application/json; charset=utf-8 50
2025-04-14 19:45:53.256 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:45:53.289 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 19:45:53.301 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(PANDA.Api.Controllers.LoginRequest) on controller PANDA.Api.Controllers.AuthController (PANDA.Api).
2025-04-14 19:45:53.371 +01:00 [INF] Executing action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api) - Validation state: "Valid"
2025-04-14 19:45:53.408 +01:00 [INF] Executed action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 34.3073ms.
2025-04-14 19:45:53.414 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-14 19:45:53.425 +01:00 [INF] Executed action PANDA.Api.Controllers.AuthController.Login (PANDA.Api) in 121.0963ms
2025-04-14 19:45:53.425 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 19:45:53.425 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44372/api/auth/login - 200 null application/json; charset=utf-8 170.3562ms
2025-04-14 19:46:02.255 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/appointments - null null
2025-04-14 19:46:02.256 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:46:02.256 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/appointments - 204 null null 0.7207ms
2025-04-14 19:46:02.257 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 19:46:02.258 +01:00 [INF] CORS policy execution successful.
2025-04-14 19:46:02.272 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[Security Artifact of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/SecurityArtifactLogging.]' as Base64Url encoded string.
 ---> System.MissingMethodException: Method not found: 'Void Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(System.ReadOnlySpan`1<Char>, System.Span`1<Byte>)'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-04-14 19:46:02.289 +01:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-04-14 19:46:02.292 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 19:46:02.295 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 19:46:02.296 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 38.8607ms
2025-04-14 20:45:08.386 +01:00 [INF] User profile is available. Using 'C:\Users\simon_adm\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-14 20:45:08.534 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 20:45:08.535 +01:00 [INF] Hosting environment: Development
2025-04-14 20:45:08.535 +01:00 [INF] Content root path: C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api
2025-04-14 20:45:08.562 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - null null
2025-04-14 20:45:08.829 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 268.4346ms
2025-04-14 20:45:23.320 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/auth/login - null null
2025-04-14 20:45:23.328 +01:00 [INF] CORS policy execution successful.
2025-04-14 20:45:23.329 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/auth/login - 204 null null 10.1009ms
2025-04-14 20:45:23.333 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44372/api/auth/login - application/json; charset=utf-8 50
2025-04-14 20:45:23.334 +01:00 [INF] CORS policy execution successful.
2025-04-14 20:45:23.371 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 20:45:23.385 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(PANDA.Api.Controllers.LoginRequest) on controller PANDA.Api.Controllers.AuthController (PANDA.Api).
2025-04-14 20:45:23.445 +01:00 [INF] Executing action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api) - Validation state: "Valid"
2025-04-14 20:45:23.482 +01:00 [INF] Executed action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 34.592ms.
2025-04-14 20:45:23.488 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-14 20:45:23.498 +01:00 [INF] Executed action PANDA.Api.Controllers.AuthController.Login (PANDA.Api) in 110.6617ms
2025-04-14 20:45:23.498 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 20:45:23.498 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44372/api/auth/login - 200 null application/json; charset=utf-8 165.7798ms
2025-04-14 20:45:25.295 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/appointments - null null
2025-04-14 20:45:25.295 +01:00 [INF] CORS policy execution successful.
2025-04-14 20:45:25.295 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/appointments - 204 null null 0.8924ms
2025-04-14 20:45:25.297 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 20:45:25.298 +01:00 [INF] CORS policy execution successful.
2025-04-14 20:45:25.311 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[Security Artifact of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/SecurityArtifactLogging.]' as Base64Url encoded string.
 ---> System.MissingMethodException: Method not found: 'Void Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(System.ReadOnlySpan`1<Char>, System.Span`1<Byte>)'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-04-14 20:45:25.332 +01:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-04-14 20:45:25.335 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Clinician|Admin)
2025-04-14 20:45:25.338 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-14 20:45:25.338 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 401 null null 41.4589ms
2025-04-14 20:48:47.822 +01:00 [INF] User profile is available. Using 'C:\Users\simon_adm\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-14 20:48:47.930 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 20:48:47.935 +01:00 [INF] Hosting environment: Development
2025-04-14 20:48:47.935 +01:00 [INF] Content root path: C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api
2025-04-14 20:48:47.956 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - null null
2025-04-14 20:48:48.165 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 210.0549ms
2025-04-14 20:48:59.443 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/auth/login - null null
2025-04-14 20:48:59.451 +01:00 [INF] CORS policy execution successful.
2025-04-14 20:48:59.452 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/auth/login - 204 null null 10.6867ms
2025-04-14 20:48:59.454 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44372/api/auth/login - application/json; charset=utf-8 50
2025-04-14 20:48:59.456 +01:00 [INF] CORS policy execution successful.
2025-04-14 20:48:59.491 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 20:48:59.504 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(PANDA.Api.Controllers.LoginRequest) on controller PANDA.Api.Controllers.AuthController (PANDA.Api).
2025-04-14 20:48:59.560 +01:00 [INF] Executing action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api) - Validation state: "Valid"
2025-04-14 20:48:59.595 +01:00 [INF] Executed action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 32.9593ms.
2025-04-14 20:48:59.600 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-14 20:48:59.611 +01:00 [INF] Executed action PANDA.Api.Controllers.AuthController.Login (PANDA.Api) in 105.0119ms
2025-04-14 20:48:59.611 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 20:48:59.611 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44372/api/auth/login - 200 null application/json; charset=utf-8 156.8002ms
2025-04-14 20:49:00.629 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/appointments - null null
2025-04-14 20:49:00.629 +01:00 [INF] CORS policy execution successful.
2025-04-14 20:49:00.630 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/appointments - 204 null null 0.6875ms
2025-04-14 20:49:00.631 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 20:49:00.632 +01:00 [INF] CORS policy execution successful.
2025-04-14 20:49:00.675 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api)'
2025-04-14 20:49:00.678 +01:00 [INF] Route matched with {action = "GetAll", controller = "Appointments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.AppointmentsController (PANDA.Api).
2025-04-14 20:49:00.790 +01:00 [INF] Executing action method PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 20:49:14.758 +01:00 [INF] Retrieving all appointments
2025-04-14 20:49:15.445 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AppointmentDate", "a"."Clinician", "a"."ClinicianId", "a"."Department", "a"."MissedTimestamp", "a"."PatientId", "a"."PatientName", "a"."Status"
FROM "Appointments" AS "a"
ORDER BY "a"."AppointmentDate"
2025-04-14 20:49:15.499 +01:00 [INF] Executed action method PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 14708.9472ms.
2025-04-14 20:49:15.500 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.Appointment.AppointmentDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 20:49:15.519 +01:00 [INF] Executed action PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api) in 14841.0242ms
2025-04-14 20:49:15.519 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api)'
2025-04-14 20:49:15.525 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 200 null application/json; charset=utf-8 14894.2962ms
2025-04-14 20:49:22.461 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients - null null
2025-04-14 20:49:22.461 +01:00 [INF] CORS policy execution successful.
2025-04-14 20:49:22.462 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 20:49:22.464 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 20:49:22.465 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 20:49:22.466 +01:00 [INF] Retrieving all patients
2025-04-14 20:49:22.479 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
2025-04-14 20:49:22.481 +01:00 [INF] Retrieved 0 patients
2025-04-14 20:49:22.481 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 16.4267ms.
2025-04-14 20:49:22.481 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.PatientDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 20:49:22.486 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) in 22.0868ms
2025-04-14 20:49:22.487 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 20:49:22.488 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The converter specified on 'PANDA.Shared.DTOs.PatientDto.DateOfBirth' is not compatible with the type 'System.DateOnly'.
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_SerializationConverterOnAttributeNotCompatible(Type classTypeAttributeIsOn, MemberInfo memberInfo, Type typeToConvert)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetConverterFromAttribute(JsonConverterAttribute converterAttribute, Type typeToConvert, MemberInfo memberInfo, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetCustomConverterForMember(Type typeToConvert, MemberInfo memberInfo, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreatePropertyInfo(JsonTypeInfo typeInfo, Type typeToConvert, MemberInfo memberInfo, NullabilityInfoContext nullabilityCtx, JsonSerializerOptions options, Boolean shouldCheckForRequiredKeyword, Boolean hasJsonIncludeAttribute)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.AddMember(JsonTypeInfo typeInfo, Type typeToConvert, MemberInfo memberInfo, NullabilityInfoContext nullabilityCtx, Boolean shouldCheckForRequiredKeyword, Boolean hasJsonIncludeAttribute, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.AddMembersDeclaredBySuperType(JsonTypeInfo typeInfo, Type currentType, NullabilityInfoContext nullabilityCtx, Boolean constructorHasSetsRequiredMembersAttribute, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.PopulateProperties(JsonTypeInfo typeInfo, NullabilityInfoContext nullabilityCtx)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreateTypeInfoCore(Type type, JsonConverter converter, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreateJsonTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoNoCaching(Type type)
   at System.Text.Json.JsonSerializerOptions.CachingContext.CreateCacheEntry(Type type, CachingContext context)
--- End of stack trace from previous location ---
   at System.Text.Json.JsonSerializerOptions.CachingContext.CacheEntry.GetResult()
   at System.Text.Json.JsonSerializerOptions.CachingContext.GetOrAddTypeInfo(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfo(Type type)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultAsync>g__Logged|22_0(ResourceInvoker invoker, IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-14 20:49:22.510 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients - 500 null text/plain; charset=utf-8 48.8902ms
2025-04-14 20:49:22.965 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/appointments - null null
2025-04-14 20:49:22.966 +01:00 [INF] CORS policy execution successful.
2025-04-14 20:49:22.966 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/appointments - 204 null null 0.3905ms
2025-04-14 20:49:22.967 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 20:49:22.967 +01:00 [INF] CORS policy execution successful.
2025-04-14 20:49:22.969 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api)'
2025-04-14 20:49:22.969 +01:00 [INF] Route matched with {action = "GetAll", controller = "Appointments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.AppointmentsController (PANDA.Api).
2025-04-14 20:49:22.970 +01:00 [INF] Executing action method PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 20:49:26.868 +01:00 [INF] Retrieving all appointments
2025-04-14 20:49:26.883 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AppointmentDate", "a"."Clinician", "a"."ClinicianId", "a"."Department", "a"."MissedTimestamp", "a"."PatientId", "a"."PatientName", "a"."Status"
FROM "Appointments" AS "a"
ORDER BY "a"."AppointmentDate"
2025-04-14 20:49:26.884 +01:00 [INF] Executed action method PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3913.9069ms.
2025-04-14 20:49:26.884 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.Appointment.AppointmentDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 20:49:26.884 +01:00 [INF] Executed action PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api) in 3914.9205ms
2025-04-14 20:49:26.884 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api)'
2025-04-14 20:49:26.885 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 200 null application/json; charset=utf-8 3917.5999ms
2025-04-14 20:49:28.178 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients - null null
2025-04-14 20:49:28.178 +01:00 [INF] CORS policy execution successful.
2025-04-14 20:49:28.178 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 20:49:28.178 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 20:49:28.179 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 20:49:28.179 +01:00 [INF] Retrieving all patients
2025-04-14 20:49:28.180 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
2025-04-14 20:49:28.180 +01:00 [INF] Retrieved 0 patients
2025-04-14 20:49:28.180 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1.122ms.
2025-04-14 20:49:28.180 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.PatientDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 20:49:28.181 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) in 3.0434ms
2025-04-14 20:49:28.182 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 20:49:28.182 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The converter specified on 'PANDA.Shared.DTOs.PatientDto.DateOfBirth' is not compatible with the type 'System.DateOnly'.
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_SerializationConverterOnAttributeNotCompatible(Type classTypeAttributeIsOn, MemberInfo memberInfo, Type typeToConvert)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetConverterFromAttribute(JsonConverterAttribute converterAttribute, Type typeToConvert, MemberInfo memberInfo, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetCustomConverterForMember(Type typeToConvert, MemberInfo memberInfo, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreatePropertyInfo(JsonTypeInfo typeInfo, Type typeToConvert, MemberInfo memberInfo, NullabilityInfoContext nullabilityCtx, JsonSerializerOptions options, Boolean shouldCheckForRequiredKeyword, Boolean hasJsonIncludeAttribute)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.AddMember(JsonTypeInfo typeInfo, Type typeToConvert, MemberInfo memberInfo, NullabilityInfoContext nullabilityCtx, Boolean shouldCheckForRequiredKeyword, Boolean hasJsonIncludeAttribute, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.AddMembersDeclaredBySuperType(JsonTypeInfo typeInfo, Type currentType, NullabilityInfoContext nullabilityCtx, Boolean constructorHasSetsRequiredMembersAttribute, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.PopulateProperties(JsonTypeInfo typeInfo, NullabilityInfoContext nullabilityCtx)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreateTypeInfoCore(Type type, JsonConverter converter, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreateJsonTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoNoCaching(Type type)
   at System.Text.Json.JsonSerializerOptions.CachingContext.CreateCacheEntry(Type type, CachingContext context)
--- End of stack trace from previous location ---
   at System.Text.Json.JsonSerializerOptions.CachingContext.CacheEntry.GetResult()
   at System.Text.Json.JsonSerializerOptions.CachingContext.GetOrAddTypeInfo(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfo(Type type)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultAsync>g__Logged|22_0(ResourceInvoker invoker, IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-14 20:49:28.185 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients - 500 null text/plain; charset=utf-8 7.1936ms
2025-04-14 20:49:31.561 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/appointments - null null
2025-04-14 20:49:31.561 +01:00 [INF] CORS policy execution successful.
2025-04-14 20:49:31.561 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/appointments - 204 null null 0.3705ms
2025-04-14 20:49:31.562 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 20:49:31.562 +01:00 [INF] CORS policy execution successful.
2025-04-14 20:49:31.563 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api)'
2025-04-14 20:49:31.563 +01:00 [INF] Route matched with {action = "GetAll", controller = "Appointments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.AppointmentsController (PANDA.Api).
2025-04-14 20:49:31.564 +01:00 [INF] Executing action method PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 20:49:31.564 +01:00 [INF] Retrieving all appointments
2025-04-14 20:49:31.564 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AppointmentDate", "a"."Clinician", "a"."ClinicianId", "a"."Department", "a"."MissedTimestamp", "a"."PatientId", "a"."PatientName", "a"."Status"
FROM "Appointments" AS "a"
ORDER BY "a"."AppointmentDate"
2025-04-14 20:49:31.565 +01:00 [INF] Executed action method PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1.0497ms.
2025-04-14 20:49:31.565 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.Appointment.AppointmentDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 20:49:31.565 +01:00 [INF] Executed action PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api) in 2.2598ms
2025-04-14 20:49:31.565 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api)'
2025-04-14 20:49:31.565 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 200 null application/json; charset=utf-8 3.2571ms
2025-04-14 20:49:33.788 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients/summaries - null null
2025-04-14 20:49:33.789 +01:00 [INF] CORS policy execution successful.
2025-04-14 20:49:33.789 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetSummaries (PANDA.Api)'
2025-04-14 20:49:33.791 +01:00 [INF] Route matched with {action = "GetSummaries", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[PANDA.Shared.DTOs.Patient.PatientSummaryDto]]] GetSummaries() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 20:49:33.791 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetSummaries (PANDA.Api) - Validation state: "Valid"
2025-04-14 20:49:33.817 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."FirstName" || ' ' || "p"."LastName" AS "FullName"
FROM "Patients" AS "p"
2025-04-14 20:49:33.817 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetSummaries (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 25.9575ms.
2025-04-14 20:49:33.817 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.Patient.PatientSummaryDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 20:49:33.818 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetSummaries (PANDA.Api) in 27.4236ms
2025-04-14 20:49:33.818 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetSummaries (PANDA.Api)'
2025-04-14 20:49:33.818 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients/summaries - 200 null application/json; charset=utf-8 30.0105ms
2025-04-14 20:49:33.843 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/clinicians - null null
2025-04-14 20:49:33.844 +01:00 [INF] CORS policy execution successful.
2025-04-14 20:49:33.844 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.CliniciansController.GetAll (PANDA.Api)'
2025-04-14 20:49:33.845 +01:00 [INF] Route matched with {action = "GetAll", controller = "Clinicians"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.CliniciansController (PANDA.Api).
2025-04-14 20:49:33.846 +01:00 [INF] Executing action method PANDA.Api.Controllers.CliniciansController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 20:49:33.846 +01:00 [INF] Retrieving all clinicians
2025-04-14 20:49:33.849 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CreatedAt", "c"."Department", "c"."Email", "c"."FullName", "c"."IsActive", "c"."PhoneNumber", "c"."RegistrationNumber"
FROM "Clinicians" AS "c"
2025-04-14 20:49:33.859 +01:00 [INF] Executed action method PANDA.Api.Controllers.CliniciansController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 13.0968ms.
2025-04-14 20:49:33.859 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.Clinician.ClinicianDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 20:49:33.865 +01:00 [INF] Executed action PANDA.Api.Controllers.CliniciansController.GetAll (PANDA.Api) in 19.5457ms
2025-04-14 20:49:33.865 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.CliniciansController.GetAll (PANDA.Api)'
2025-04-14 20:49:33.865 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/clinicians - 200 null application/json; charset=utf-8 21.5516ms
2025-04-14 20:50:30.126 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients - null null
2025-04-14 20:50:30.128 +01:00 [INF] CORS policy execution successful.
2025-04-14 20:50:30.128 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 20:50:30.128 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 20:50:30.128 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 20:50:30.129 +01:00 [INF] Retrieving all patients
2025-04-14 20:50:30.130 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
2025-04-14 20:50:30.131 +01:00 [INF] Retrieved 0 patients
2025-04-14 20:50:30.163 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 34.759ms.
2025-04-14 20:50:30.164 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.PatientDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 20:50:30.165 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) in 36.5527ms
2025-04-14 20:50:30.165 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 20:50:30.166 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The converter specified on 'PANDA.Shared.DTOs.PatientDto.DateOfBirth' is not compatible with the type 'System.DateOnly'.
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_SerializationConverterOnAttributeNotCompatible(Type classTypeAttributeIsOn, MemberInfo memberInfo, Type typeToConvert)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetConverterFromAttribute(JsonConverterAttribute converterAttribute, Type typeToConvert, MemberInfo memberInfo, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetCustomConverterForMember(Type typeToConvert, MemberInfo memberInfo, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreatePropertyInfo(JsonTypeInfo typeInfo, Type typeToConvert, MemberInfo memberInfo, NullabilityInfoContext nullabilityCtx, JsonSerializerOptions options, Boolean shouldCheckForRequiredKeyword, Boolean hasJsonIncludeAttribute)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.AddMember(JsonTypeInfo typeInfo, Type typeToConvert, MemberInfo memberInfo, NullabilityInfoContext nullabilityCtx, Boolean shouldCheckForRequiredKeyword, Boolean hasJsonIncludeAttribute, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.AddMembersDeclaredBySuperType(JsonTypeInfo typeInfo, Type currentType, NullabilityInfoContext nullabilityCtx, Boolean constructorHasSetsRequiredMembersAttribute, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.PopulateProperties(JsonTypeInfo typeInfo, NullabilityInfoContext nullabilityCtx)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreateTypeInfoCore(Type type, JsonConverter converter, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreateJsonTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoNoCaching(Type type)
   at System.Text.Json.JsonSerializerOptions.CachingContext.CreateCacheEntry(Type type, CachingContext context)
--- End of stack trace from previous location ---
   at System.Text.Json.JsonSerializerOptions.CachingContext.CacheEntry.GetResult()
   at System.Text.Json.JsonSerializerOptions.CachingContext.GetOrAddTypeInfo(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfo(Type type)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultAsync>g__Logged|22_0(ResourceInvoker invoker, IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-14 20:50:30.168 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients - 500 null text/plain; charset=utf-8 42.3812ms
2025-04-14 20:50:31.048 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/appointments - null null
2025-04-14 20:50:31.048 +01:00 [INF] CORS policy execution successful.
2025-04-14 20:50:31.048 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/appointments - 204 null null 0.4299ms
2025-04-14 20:50:31.049 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 20:50:31.050 +01:00 [INF] CORS policy execution successful.
2025-04-14 20:50:31.050 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api)'
2025-04-14 20:50:31.050 +01:00 [INF] Route matched with {action = "GetAll", controller = "Appointments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.AppointmentsController (PANDA.Api).
2025-04-14 20:50:31.050 +01:00 [INF] Executing action method PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 20:50:31.050 +01:00 [INF] Retrieving all appointments
2025-04-14 20:50:31.051 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AppointmentDate", "a"."Clinician", "a"."ClinicianId", "a"."Department", "a"."MissedTimestamp", "a"."PatientId", "a"."PatientName", "a"."Status"
FROM "Appointments" AS "a"
ORDER BY "a"."AppointmentDate"
2025-04-14 20:50:31.051 +01:00 [INF] Executed action method PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 0.897ms.
2025-04-14 20:50:31.051 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.Appointment.AppointmentDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 20:50:31.052 +01:00 [INF] Executed action PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api) in 1.6299ms
2025-04-14 20:50:31.052 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api)'
2025-04-14 20:50:31.052 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 200 null application/json; charset=utf-8 2.3319ms
2025-04-14 20:55:38.800 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2025-04-14 20:55:38.850 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-04-14 20:55:38.855 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-04-14 20:55:38.857 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-04-14 20:55:38.863 +01:00 [INF] Applying migration '20250414195523_InitialCreate'.
2025-04-14 20:55:38.878 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Appointments" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Appointments" PRIMARY KEY AUTOINCREMENT,
    "PatientId" INTEGER NOT NULL,
    "PatientName" TEXT NOT NULL,
    "AppointmentDate" TEXT NOT NULL,
    "Status" INTEGER NOT NULL,
    "ClinicianId" INTEGER NOT NULL,
    "Clinician" TEXT NOT NULL,
    "Department" INTEGER NOT NULL,
    "MissedTimestamp" TEXT NULL
);
2025-04-14 20:55:38.879 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Clinicians" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Clinicians" PRIMARY KEY AUTOINCREMENT,
    "FullName" TEXT NOT NULL,
    "Department" INTEGER NOT NULL,
    "Email" TEXT NOT NULL,
    "PhoneNumber" TEXT NOT NULL,
    "IsActive" INTEGER NOT NULL,
    "RegistrationNumber" TEXT NULL,
    "CreatedAt" TEXT NOT NULL
);
2025-04-14 20:55:38.881 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Patients" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Patients" PRIMARY KEY AUTOINCREMENT,
    "FirstName" TEXT NOT NULL,
    "LastName" TEXT NOT NULL,
    "DateOfBirth" TEXT NOT NULL,
    "Gender" INTEGER NULL,
    "NHSNumber" TEXT NOT NULL,
    "Postcode" TEXT NOT NULL
);
2025-04-14 20:55:38.882 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Users" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Users" PRIMARY KEY AUTOINCREMENT,
    "Username" TEXT NOT NULL,
    "PasswordHash" TEXT NOT NULL,
    "Role" TEXT NOT NULL
);
2025-04-14 20:55:38.883 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Appointments" ("Id", "AppointmentDate", "Clinician", "ClinicianId", "Department", "MissedTimestamp", "PatientId", "PatientName", "Status")
VALUES (1, '2025-05-01T11:00:00.0000000+01:00', 'Dr. Chris Carter', 1, 0, NULL, 1, 'John Doe', 0);
SELECT changes();

INSERT INTO "Appointments" ("Id", "AppointmentDate", "Clinician", "ClinicianId", "Department", "MissedTimestamp", "PatientId", "PatientName", "Status")
VALUES (2, '2025-05-02T15:30:00.0000000+01:00', 'Dr. Emma Reid', 2, 4, NULL, 2, 'Alice Smith', 0);
SELECT changes();
2025-04-14 20:55:38.884 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Clinicians" ("Id", "CreatedAt", "Department", "Email", "FullName", "IsActive", "PhoneNumber", "RegistrationNumber")
VALUES (1, '2025-04-14 19:55:23.5286742', 0, '', 'Dr. Chris Carter', 1, '', NULL);
SELECT changes();

INSERT INTO "Clinicians" ("Id", "CreatedAt", "Department", "Email", "FullName", "IsActive", "PhoneNumber", "RegistrationNumber")
VALUES (2, '2025-04-14 19:55:23.5286745', 4, '', 'Dr. Emma Reid', 1, '', NULL);
SELECT changes();
2025-04-14 20:55:38.885 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Patients" ("Id", "DateOfBirth", "FirstName", "Gender", "LastName", "NHSNumber", "Postcode")
VALUES (1, '1985-06-15 00:00:00', 'John', 0, 'Doe', '1234567890', 'AB12 3CD');
SELECT changes();

INSERT INTO "Patients" ("Id", "DateOfBirth", "FirstName", "Gender", "LastName", "NHSNumber", "Postcode")
VALUES (2, '1990-11-25 00:00:00', 'Alice', 1, 'Smith', '9876543210', 'EF45 6GH');
SELECT changes();
2025-04-14 20:55:38.886 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "PasswordHash", "Role", "Username")
VALUES (1, 'admin123', 'Admin', 'admin');
SELECT changes();

INSERT INTO "Users" ("Id", "PasswordHash", "Role", "Username")
VALUES (2, 'reception123', 'Reception', 'reception');
SELECT changes();

INSERT INTO "Users" ("Id", "PasswordHash", "Role", "Username")
VALUES (3, 'clinician123', 'Clinician', 'drchris');
SELECT changes();
2025-04-14 20:55:38.887 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250414195523_InitialCreate', '8.0.3');
2025-04-14 20:55:48.244 +01:00 [INF] User profile is available. Using 'C:\Users\simon_adm\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-14 20:55:48.348 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 20:55:48.348 +01:00 [INF] Hosting environment: Development
2025-04-14 20:55:48.348 +01:00 [INF] Content root path: C:\Users\simon_adm\RiderProjects\PANDA.Api\PANDA.Api
2025-04-14 20:55:48.366 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - null null
2025-04-14 20:55:48.557 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 191.4671ms
2025-04-14 20:56:06.153 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients - null null
2025-04-14 20:56:06.163 +01:00 [INF] CORS policy execution successful.
2025-04-14 20:56:06.203 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 20:56:06.215 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 20:56:06.331 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 20:56:06.333 +01:00 [INF] Retrieving all patients
2025-04-14 20:56:06.626 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/appointments - null null
2025-04-14 20:56:06.627 +01:00 [INF] CORS policy execution successful.
2025-04-14 20:56:06.628 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/appointments - 204 null null 2.3019ms
2025-04-14 20:56:06.629 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 20:56:06.629 +01:00 [INF] CORS policy execution successful.
2025-04-14 20:56:06.719 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api)'
2025-04-14 20:56:06.721 +01:00 [INF] Route matched with {action = "GetAll", controller = "Appointments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.AppointmentsController (PANDA.Api).
2025-04-14 20:56:06.722 +01:00 [INF] Executing action method PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 20:56:06.722 +01:00 [INF] Retrieving all appointments
2025-04-14 20:56:07.009 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
2025-04-14 20:56:07.010 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AppointmentDate", "a"."Clinician", "a"."ClinicianId", "a"."Department", "a"."MissedTimestamp", "a"."PatientId", "a"."PatientName", "a"."Status"
FROM "Appointments" AS "a"
ORDER BY "a"."AppointmentDate"
2025-04-14 20:56:07.057 +01:00 [INF] Retrieved 2 patients
2025-04-14 20:56:07.061 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 726.3217ms.
2025-04-14 20:56:07.067 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.PatientDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 20:56:07.069 +01:00 [INF] Executed action method PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 347.0923ms.
2025-04-14 20:56:07.069 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.Appointment.AppointmentDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 20:56:07.093 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) in 874.8572ms
2025-04-14 20:56:07.093 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 20:56:07.094 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The converter specified on 'PANDA.Shared.DTOs.PatientDto.DateOfBirth' is not compatible with the type 'System.DateOnly'.
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_SerializationConverterOnAttributeNotCompatible(Type classTypeAttributeIsOn, MemberInfo memberInfo, Type typeToConvert)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetConverterFromAttribute(JsonConverterAttribute converterAttribute, Type typeToConvert, MemberInfo memberInfo, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetCustomConverterForMember(Type typeToConvert, MemberInfo memberInfo, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreatePropertyInfo(JsonTypeInfo typeInfo, Type typeToConvert, MemberInfo memberInfo, NullabilityInfoContext nullabilityCtx, JsonSerializerOptions options, Boolean shouldCheckForRequiredKeyword, Boolean hasJsonIncludeAttribute)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.AddMember(JsonTypeInfo typeInfo, Type typeToConvert, MemberInfo memberInfo, NullabilityInfoContext nullabilityCtx, Boolean shouldCheckForRequiredKeyword, Boolean hasJsonIncludeAttribute, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.AddMembersDeclaredBySuperType(JsonTypeInfo typeInfo, Type currentType, NullabilityInfoContext nullabilityCtx, Boolean constructorHasSetsRequiredMembersAttribute, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.PopulateProperties(JsonTypeInfo typeInfo, NullabilityInfoContext nullabilityCtx)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreateTypeInfoCore(Type type, JsonConverter converter, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreateJsonTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoNoCaching(Type type)
   at System.Text.Json.JsonSerializerOptions.CachingContext.CreateCacheEntry(Type type, CachingContext context)
--- End of stack trace from previous location ---
   at System.Text.Json.JsonSerializerOptions.CachingContext.CacheEntry.GetResult()
   at System.Text.Json.JsonSerializerOptions.CachingContext.GetOrAddTypeInfo(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfo(Type type)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultAsync>g__Logged|22_0(ResourceInvoker invoker, IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-14 20:56:07.123 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients - 500 null text/plain; charset=utf-8 971.1476ms
2025-04-14 20:56:07.127 +01:00 [INF] Executed action PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api) in 406.3867ms
2025-04-14 20:56:07.127 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api)'
2025-04-14 20:56:07.127 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 200 null application/json; charset=utf-8 498.2561ms
2025-04-14 20:56:07.953 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients - null null
2025-04-14 20:56:07.954 +01:00 [INF] CORS policy execution successful.
2025-04-14 20:56:07.955 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 20:56:07.956 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 20:56:07.956 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 20:56:07.957 +01:00 [INF] Retrieving all patients
2025-04-14 20:56:07.978 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
2025-04-14 20:56:07.978 +01:00 [INF] Retrieved 2 patients
2025-04-14 20:56:07.978 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 21.6428ms.
2025-04-14 20:56:07.978 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.PatientDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 20:56:07.979 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) in 23.578ms
2025-04-14 20:56:07.980 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 20:56:07.981 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The converter specified on 'PANDA.Shared.DTOs.PatientDto.DateOfBirth' is not compatible with the type 'System.DateOnly'.
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_SerializationConverterOnAttributeNotCompatible(Type classTypeAttributeIsOn, MemberInfo memberInfo, Type typeToConvert)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetConverterFromAttribute(JsonConverterAttribute converterAttribute, Type typeToConvert, MemberInfo memberInfo, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetCustomConverterForMember(Type typeToConvert, MemberInfo memberInfo, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreatePropertyInfo(JsonTypeInfo typeInfo, Type typeToConvert, MemberInfo memberInfo, NullabilityInfoContext nullabilityCtx, JsonSerializerOptions options, Boolean shouldCheckForRequiredKeyword, Boolean hasJsonIncludeAttribute)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.AddMember(JsonTypeInfo typeInfo, Type typeToConvert, MemberInfo memberInfo, NullabilityInfoContext nullabilityCtx, Boolean shouldCheckForRequiredKeyword, Boolean hasJsonIncludeAttribute, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.AddMembersDeclaredBySuperType(JsonTypeInfo typeInfo, Type currentType, NullabilityInfoContext nullabilityCtx, Boolean constructorHasSetsRequiredMembersAttribute, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.PopulateProperties(JsonTypeInfo typeInfo, NullabilityInfoContext nullabilityCtx)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreateTypeInfoCore(Type type, JsonConverter converter, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreateJsonTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoNoCaching(Type type)
   at System.Text.Json.JsonSerializerOptions.CachingContext.CreateCacheEntry(Type type, CachingContext context)
--- End of stack trace from previous location ---
   at System.Text.Json.JsonSerializerOptions.CachingContext.CacheEntry.GetResult()
   at System.Text.Json.JsonSerializerOptions.CachingContext.GetOrAddTypeInfo(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfo(Type type)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultAsync>g__Logged|22_0(ResourceInvoker invoker, IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-14 20:56:07.983 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients - 500 null text/plain; charset=utf-8 29.8884ms
2025-04-14 20:56:08.466 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 20:56:08.466 +01:00 [INF] CORS policy execution successful.
2025-04-14 20:56:08.468 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api)'
2025-04-14 20:56:08.468 +01:00 [INF] Route matched with {action = "GetAll", controller = "Appointments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.AppointmentsController (PANDA.Api).
2025-04-14 20:56:08.469 +01:00 [INF] Executing action method PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 20:56:08.469 +01:00 [INF] Retrieving all appointments
2025-04-14 20:56:08.471 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AppointmentDate", "a"."Clinician", "a"."ClinicianId", "a"."Department", "a"."MissedTimestamp", "a"."PatientId", "a"."PatientName", "a"."Status"
FROM "Appointments" AS "a"
ORDER BY "a"."AppointmentDate"
2025-04-14 20:56:08.472 +01:00 [INF] Executed action method PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.7145ms.
2025-04-14 20:56:08.472 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.Appointment.AppointmentDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 20:56:08.473 +01:00 [INF] Executed action PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api) in 4.7433ms
2025-04-14 20:56:08.473 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api)'
2025-04-14 20:56:08.473 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 200 null application/json; charset=utf-8 6.8347ms
2025-04-14 20:56:09.043 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients - null null
2025-04-14 20:56:09.043 +01:00 [INF] CORS policy execution successful.
2025-04-14 20:56:09.044 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 20:56:09.044 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 20:56:09.044 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 20:56:09.044 +01:00 [INF] Retrieving all patients
2025-04-14 20:56:09.045 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
2025-04-14 20:56:09.045 +01:00 [INF] Retrieved 2 patients
2025-04-14 20:56:09.045 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 0.9397ms.
2025-04-14 20:56:09.046 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.PatientDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 20:56:09.047 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) in 2.9106ms
2025-04-14 20:56:09.047 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 20:56:09.048 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The converter specified on 'PANDA.Shared.DTOs.PatientDto.DateOfBirth' is not compatible with the type 'System.DateOnly'.
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_SerializationConverterOnAttributeNotCompatible(Type classTypeAttributeIsOn, MemberInfo memberInfo, Type typeToConvert)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetConverterFromAttribute(JsonConverterAttribute converterAttribute, Type typeToConvert, MemberInfo memberInfo, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetCustomConverterForMember(Type typeToConvert, MemberInfo memberInfo, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreatePropertyInfo(JsonTypeInfo typeInfo, Type typeToConvert, MemberInfo memberInfo, NullabilityInfoContext nullabilityCtx, JsonSerializerOptions options, Boolean shouldCheckForRequiredKeyword, Boolean hasJsonIncludeAttribute)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.AddMember(JsonTypeInfo typeInfo, Type typeToConvert, MemberInfo memberInfo, NullabilityInfoContext nullabilityCtx, Boolean shouldCheckForRequiredKeyword, Boolean hasJsonIncludeAttribute, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.AddMembersDeclaredBySuperType(JsonTypeInfo typeInfo, Type currentType, NullabilityInfoContext nullabilityCtx, Boolean constructorHasSetsRequiredMembersAttribute, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.PopulateProperties(JsonTypeInfo typeInfo, NullabilityInfoContext nullabilityCtx)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreateTypeInfoCore(Type type, JsonConverter converter, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreateJsonTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoNoCaching(Type type)
   at System.Text.Json.JsonSerializerOptions.CachingContext.CreateCacheEntry(Type type, CachingContext context)
--- End of stack trace from previous location ---
   at System.Text.Json.JsonSerializerOptions.CachingContext.CacheEntry.GetResult()
   at System.Text.Json.JsonSerializerOptions.CachingContext.GetOrAddTypeInfo(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfo(Type type)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultAsync>g__Logged|22_0(ResourceInvoker invoker, IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-14 20:56:09.050 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients - 500 null text/plain; charset=utf-8 7.2678ms
2025-04-14 20:56:19.759 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/auth/login - null null
2025-04-14 20:56:19.760 +01:00 [INF] CORS policy execution successful.
2025-04-14 20:56:19.760 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/auth/login - 204 null null 0.6414ms
2025-04-14 20:56:19.761 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44372/api/auth/login - application/json; charset=utf-8 50
2025-04-14 20:56:19.762 +01:00 [INF] CORS policy execution successful.
2025-04-14 20:56:19.762 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 20:56:19.767 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(PANDA.Api.Controllers.LoginRequest) on controller PANDA.Api.Controllers.AuthController (PANDA.Api).
2025-04-14 20:56:19.806 +01:00 [INF] Executing action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api) - Validation state: "Valid"
2025-04-14 20:56:19.815 +01:00 [INF] Executed action method PANDA.Api.Controllers.AuthController.Login (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 8.9178ms.
2025-04-14 20:56:19.815 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-14 20:56:19.817 +01:00 [INF] Executed action PANDA.Api.Controllers.AuthController.Login (PANDA.Api) in 50.3617ms
2025-04-14 20:56:19.817 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.AuthController.Login (PANDA.Api)'
2025-04-14 20:56:19.817 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44372/api/auth/login - 200 null application/json; charset=utf-8 55.9338ms
2025-04-14 20:56:21.188 +01:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:44372/api/appointments - null null
2025-04-14 20:56:21.188 +01:00 [INF] CORS policy execution successful.
2025-04-14 20:56:21.188 +01:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:44372/api/appointments - 204 null null 0.4283ms
2025-04-14 20:56:21.189 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/appointments - null null
2025-04-14 20:56:21.189 +01:00 [INF] CORS policy execution successful.
2025-04-14 20:56:21.190 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api)'
2025-04-14 20:56:21.190 +01:00 [INF] Route matched with {action = "GetAll", controller = "Appointments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.AppointmentsController (PANDA.Api).
2025-04-14 20:56:21.191 +01:00 [INF] Executing action method PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 20:56:21.191 +01:00 [INF] Retrieving all appointments
2025-04-14 20:56:21.192 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AppointmentDate", "a"."Clinician", "a"."ClinicianId", "a"."Department", "a"."MissedTimestamp", "a"."PatientId", "a"."PatientName", "a"."Status"
FROM "Appointments" AS "a"
ORDER BY "a"."AppointmentDate"
2025-04-14 20:56:21.192 +01:00 [INF] Executed action method PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1.32ms.
2025-04-14 20:56:21.192 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.Appointment.AppointmentDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 20:56:21.192 +01:00 [INF] Executed action PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api) in 2.5958ms
2025-04-14 20:56:21.193 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.AppointmentsController.GetAll (PANDA.Api)'
2025-04-14 20:56:21.193 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/appointments - 200 null application/json; charset=utf-8 3.7801ms
2025-04-14 20:56:26.320 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients/summaries - null null
2025-04-14 20:56:26.321 +01:00 [INF] CORS policy execution successful.
2025-04-14 20:56:26.321 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetSummaries (PANDA.Api)'
2025-04-14 20:56:26.323 +01:00 [INF] Route matched with {action = "GetSummaries", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[PANDA.Shared.DTOs.Patient.PatientSummaryDto]]] GetSummaries() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 20:56:26.323 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetSummaries (PANDA.Api) - Validation state: "Valid"
2025-04-14 20:56:26.346 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."FirstName" || ' ' || "p"."LastName" AS "FullName"
FROM "Patients" AS "p"
2025-04-14 20:56:26.347 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetSummaries (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.7956ms.
2025-04-14 20:56:26.347 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.Patient.PatientSummaryDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 20:56:26.348 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetSummaries (PANDA.Api) in 25.2997ms
2025-04-14 20:56:26.348 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetSummaries (PANDA.Api)'
2025-04-14 20:56:26.348 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients/summaries - 200 null application/json; charset=utf-8 27.7736ms
2025-04-14 20:56:26.372 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/clinicians - null null
2025-04-14 20:56:26.372 +01:00 [INF] CORS policy execution successful.
2025-04-14 20:56:26.372 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.CliniciansController.GetAll (PANDA.Api)'
2025-04-14 20:56:26.374 +01:00 [INF] Route matched with {action = "GetAll", controller = "Clinicians"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.CliniciansController (PANDA.Api).
2025-04-14 20:56:26.374 +01:00 [INF] Executing action method PANDA.Api.Controllers.CliniciansController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 20:56:26.375 +01:00 [INF] Retrieving all clinicians
2025-04-14 20:56:26.378 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CreatedAt", "c"."Department", "c"."Email", "c"."FullName", "c"."IsActive", "c"."PhoneNumber", "c"."RegistrationNumber"
FROM "Clinicians" AS "c"
2025-04-14 20:56:26.387 +01:00 [INF] Executed action method PANDA.Api.Controllers.CliniciansController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 12.3468ms.
2025-04-14 20:56:26.387 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.Clinician.ClinicianDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 20:56:26.393 +01:00 [INF] Executed action PANDA.Api.Controllers.CliniciansController.GetAll (PANDA.Api) in 18.9719ms
2025-04-14 20:56:26.393 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.CliniciansController.GetAll (PANDA.Api)'
2025-04-14 20:56:26.393 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/clinicians - 200 null application/json; charset=utf-8 21.0758ms
2025-04-14 20:56:36.486 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44372/api/patients - null null
2025-04-14 20:56:36.486 +01:00 [INF] CORS policy execution successful.
2025-04-14 20:56:36.487 +01:00 [INF] Executing endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 20:56:36.487 +01:00 [INF] Route matched with {action = "GetAll", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller PANDA.Api.Controllers.PatientsController (PANDA.Api).
2025-04-14 20:56:36.487 +01:00 [INF] Executing action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) - Validation state: "Valid"
2025-04-14 20:56:36.487 +01:00 [INF] Retrieving all patients
2025-04-14 20:56:36.488 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."DateOfBirth", "p"."FirstName", "p"."Gender", "p"."LastName", "p"."NHSNumber", "p"."Postcode"
FROM "Patients" AS "p"
2025-04-14 20:56:36.488 +01:00 [INF] Retrieved 2 patients
2025-04-14 20:56:36.488 +01:00 [INF] Executed action method PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 0.8807ms.
2025-04-14 20:56:36.488 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PANDA.Shared.DTOs.PatientDto, PANDA.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 20:56:36.489 +01:00 [INF] Executed action PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api) in 2.2788ms
2025-04-14 20:56:36.490 +01:00 [INF] Executed endpoint 'PANDA.Api.Controllers.PatientsController.GetAll (PANDA.Api)'
2025-04-14 20:56:36.490 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The converter specified on 'PANDA.Shared.DTOs.PatientDto.DateOfBirth' is not compatible with the type 'System.DateOnly'.
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_SerializationConverterOnAttributeNotCompatible(Type classTypeAttributeIsOn, MemberInfo memberInfo, Type typeToConvert)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetConverterFromAttribute(JsonConverterAttribute converterAttribute, Type typeToConvert, MemberInfo memberInfo, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetCustomConverterForMember(Type typeToConvert, MemberInfo memberInfo, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreatePropertyInfo(JsonTypeInfo typeInfo, Type typeToConvert, MemberInfo memberInfo, NullabilityInfoContext nullabilityCtx, JsonSerializerOptions options, Boolean shouldCheckForRequiredKeyword, Boolean hasJsonIncludeAttribute)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.AddMember(JsonTypeInfo typeInfo, Type typeToConvert, MemberInfo memberInfo, NullabilityInfoContext nullabilityCtx, Boolean shouldCheckForRequiredKeyword, Boolean hasJsonIncludeAttribute, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.AddMembersDeclaredBySuperType(JsonTypeInfo typeInfo, Type currentType, NullabilityInfoContext nullabilityCtx, Boolean constructorHasSetsRequiredMembersAttribute, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.PopulateProperties(JsonTypeInfo typeInfo, NullabilityInfoContext nullabilityCtx)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreateTypeInfoCore(Type type, JsonConverter converter, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreateJsonTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoNoCaching(Type type)
   at System.Text.Json.JsonSerializerOptions.CachingContext.CreateCacheEntry(Type type, CachingContext context)
--- End of stack trace from previous location ---
   at System.Text.Json.JsonSerializerOptions.CachingContext.CacheEntry.GetResult()
   at System.Text.Json.JsonSerializerOptions.CachingContext.GetOrAddTypeInfo(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|172_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfo(Type type)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultAsync>g__Logged|22_0(ResourceInvoker invoker, IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-14 20:56:36.493 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44372/api/patients - 500 null text/plain; charset=utf-8 6.2564ms
